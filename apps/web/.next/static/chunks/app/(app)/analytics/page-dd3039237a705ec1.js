(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[296],{9668:(e,t,a)=>{Promise.resolve().then(a.bind(a,1569))},1569:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(4568),s=a(5138),r=a(6123),i=a(3056),c=a(3473);function l(){let{data:e=[],isLoading:t}=(0,s.xG)(),a=(0,s.GT)(e);return t?(0,n.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-text",children:"Analytics"}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,n.jsx)("div",{className:"h-32 rounded-xl bg-surface-variant animate-pulse"},t))})]}):(0,n.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-text",children:"Analytics"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)(c.j,{className:"p-6",children:[(0,n.jsx)("p",{className:"text-sm text-text-secondary",children:"Total Expenses"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-expense mt-2",children:(0,r.vv)(a.totalExpenses)})]}),(0,n.jsxs)(c.j,{className:"p-6",children:[(0,n.jsx)("p",{className:"text-sm text-text-secondary",children:"Total Income"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-income mt-2",children:(0,r.vv)(a.totalIncome)})]}),(0,n.jsxs)(c.j,{className:"p-6",children:[(0,n.jsx)("p",{className:"text-sm text-text-secondary",children:"Net Balance"}),(0,n.jsx)("p",{className:"text-3xl font-bold mt-2 ".concat(a.net>=0?"text-income":"text-expense"),children:(0,r.vv)(a.net)})]}),(0,n.jsxs)(c.j,{className:"p-6",children:[(0,n.jsx)("p",{className:"text-sm text-text-secondary",children:"Transactions"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-text mt-2",children:a.count})]})]}),e.length>0&&(0,n.jsxs)(i.Zp,{children:[(0,n.jsx)(i.aR,{children:(0,n.jsx)(i.ZB,{children:"Top Expenses"})}),(0,n.jsx)(i.Wu,{children:(0,n.jsx)("div",{className:"space-y-3",children:e.filter(e=>"expense"===e.type).sort((e,t)=>t.transaction.value-e.transaction.value).slice(0,5).map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-0",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-text",children:e.category.name}),(0,n.jsx)("p",{className:"text-xs text-text-secondary",children:e.transaction.createdAt&&new Date(e.transaction.createdAt).toLocaleDateString()})]}),(0,n.jsx)("p",{className:"text-sm font-semibold text-expense",children:(0,r.vv)(e.transaction.value)})]},e.id))})})]})]})}},3473:(e,t,a)=>{"use strict";a.d(t,{j:()=>r});var n=a(4568),s=a(2393);function r(e){let{className:t,variant:a="default",children:r,...i}=e;return(0,n.jsx)("div",{className:(0,s.cn)("rounded-xl border border-glass-border backdrop-blur-xl shadow-lg","default"===a?"bg-glass-bg":"bg-glass-bg-strong",t),...i,children:r})}},3056:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>c});var n=a(4568),s=a(7620),r=a(2393);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("rounded-xl border border-border bg-surface shadow-sm",a),...s})});i.displayName="Card";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...s})});c.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight text-text",a),...s})});l.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-text-secondary",a),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},5138:(e,t,a)=>{"use strict";a.d(t,{GT:()=>c,vf:()=>i,xG:()=>r});var n=a(9857),s=a(6284);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,n.I)({queryKey:["transactions",null==e?void 0:e.scope,null==e?void 0:e.familyId,t.length],queryFn:async()=>{let a={};(null==e?void 0:e.familyId)&&(a.familyId=e.familyId),(null==e?void 0:e.scope)&&"all"!==e.scope&&(a.scope=e.scope.toUpperCase());let[n,r]=await Promise.all([s.u.get("/expenses",a),s.u.get("/incomes",a)]),i=(null==e?void 0:e.familyId)?t.find(t=>t.id===e.familyId):void 0;return[...(n.data||[]).map(e=>(function(e,t){let a=e.transaction;return{id:e.id,type:"expense",category:e.category,store:e.store,scope:(null==a?void 0:a.scope)||"PERSONAL",familyId:null==a?void 0:a.familyId,family:t?{id:t.id,name:t.name}:void 0,transaction:{id:(null==a?void 0:a.id)||"",value:(null==a?void 0:a.value)||0,createdAt:null==a?void 0:a.createdAt,description:null==a?void 0:a.description,user:null==a?void 0:a.user},items:e.items,receiptImages:e.receiptImages||[]}})(e,i)),...(r.data||[]).map(e=>(function(e,t){let a=e.transaction;return{id:e.id,type:"income",category:e.category||{id:e.categoryId,name:"Income"},scope:(null==a?void 0:a.scope)||"PERSONAL",familyId:null==a?void 0:a.familyId,family:t?{id:t.id,name:t.name}:void 0,transaction:{id:e.transactionId||"",value:(null==a?void 0:a.value)||0,createdAt:(null==a?void 0:a.createdAt)||e.createdAt,description:null==a?void 0:a.description,user:null==a?void 0:a.user},receiptImages:e.receiptImages||[]}})(e,i))].sort((e,t)=>{let a=e.transaction.createdAt?new Date(e.transaction.createdAt).getTime():0;return(t.transaction.createdAt?new Date(t.transaction.createdAt).getTime():0)-a})}})}function i(e){let t={};return e.forEach(e=>{if(e.transaction.createdAt){let a=new Date(e.transaction.createdAt),n="".concat(a.getFullYear(),"-").concat(a.getMonth());t[n]||(t[n]=[]),t[n].push(e)}}),Object.entries(t).map(e=>{let[t,a]=e;return{key:t,monthLabel:new Date(a[0].transaction.createdAt).toLocaleDateString("en-US",{month:"long",year:"numeric"}),total:a.reduce((e,t)=>e+t.transaction.value,0),transactions:a}})}function c(e){let t=e.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.transaction.value,0),a=e.filter(e=>"income"===e.type).reduce((e,t)=>e+t.transaction.value,0);return{totalExpenses:t,totalIncome:a,net:a-t,count:e.length}}},6284:(e,t,a)=>{"use strict";a.d(t,{u:()=>i});var n=a(2314);let s="http://localhost:3000";async function r(e){if(204===e.status)return null;let t=await e.text(),a={};try{a=t?JSON.parse(t):{}}catch(a){if(!e.ok)throw Error(t||"Request failed with status ".concat(e.status));throw Error("Invalid JSON response: ".concat(t))}if(!e.ok)throw Error((a&&"object"==typeof a&&"message"in a?String(a.message):null)||e.statusText||"Request failed with status ".concat(e.status));return a}let i={async get(e,t){let a=(0,n.gf)(),i={"Content-Type":"application/json"};a&&(i.Authorization="Bearer ".concat(a));let c="".concat(s).concat(e);if(t&&Object.keys(t).length>0){let e=Object.entries(t).filter(e=>{let[,t]=e;return null!=t}).map(e=>{let[t,a]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(a))}).join("&");e&&(c+="?".concat(e))}return r(await fetch(c,{method:"GET",headers:i}))},async post(e,t,a){let i=(0,n.gf)(),c={...(null==a?void 0:a.headers)||{}},l=t instanceof FormData;return l||c["Content-Type"]||(c["Content-Type"]="application/json"),i&&(c.Authorization="Bearer ".concat(i)),r(await fetch("".concat(s).concat(e),{method:"POST",headers:c,body:l?t:JSON.stringify(t)}))},async put(e,t,a){let i=(0,n.gf)(),c={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return i&&(c.Authorization="Bearer ".concat(i)),r(await fetch("".concat(s).concat(e),{method:"PUT",headers:c,body:JSON.stringify(t)}))},async patch(e,t,a){let i=(0,n.gf)(),c={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return i&&(c.Authorization="Bearer ".concat(i)),r(await fetch("".concat(s).concat(e),{method:"PATCH",headers:c,body:JSON.stringify(t)}))},async delete(e){let t=(0,n.gf)(),a={"Content-Type":"application/json"};return t&&(a.Authorization="Bearer ".concat(t)),r(await fetch("".concat(s).concat(e),{method:"DELETE",headers:a}))}}},2314:(e,t,a)=>{"use strict";a.d(t,{WG:()=>i,eF:()=>c,gf:()=>r});var n=a(6251);let s="token";function r(){var e;return null!==(e=n.A.get(s))&&void 0!==e?e:null}function i(e){n.A.set(s,e,{expires:30,sameSite:"lax"})}function c(){n.A.remove(s)}},2393:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var n=a(5928),s=a(6564);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,n.$)(t))}},6123:(e,t,a)=>{"use strict";a.d(t,{vv:()=>i,VZ:()=>c,X5:()=>s,O5:()=>r});var n=a(9772);let s=n.Ik({email:n.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:n.Yj().min(1,"Password is required")}),r=n.Ik({firstName:n.Yj().min(1,"First name is required").min(2,"First name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"First name can only contain letters"),lastName:n.Yj().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"Last name can only contain letters"),email:n.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:n.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Must contain at least one uppercase letter").regex(/[a-z]/,"Must contain at least one lowercase letter").regex(/[0-9]/,"Must contain at least one number").regex(/[^A-Za-z0-9]/,"Must contain at least one special character"),confirmPassword:n.Yj().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords must match",path:["confirmPassword"]});function i(e){return"$".concat(e.toFixed(2))}function c(e){return e%1==0?e.toString():e.toFixed(3).replace(/\.?0+$/,"")}}},e=>{var t=t=>e(e.s=t);e.O(0,[959,999,857,772,587,855,358],()=>t(9668)),_N_E=e.O()}]);