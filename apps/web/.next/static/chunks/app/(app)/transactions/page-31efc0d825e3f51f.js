(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{8515:(t,e,a)=>{Promise.resolve().then(a.bind(a,9192))},9192:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>v});var s=a(4568),i=a(7620),n=a(5138),r=a(4475),o=a(8202);function c(t){let{typeFilter:e,scopeFilter:a,onTypeChange:i,onScopeChange:n}=t;return(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsx)(o.tU,{value:e,onValueChange:i,children:(0,s.jsxs)(o.j7,{children:[(0,s.jsx)(o.Xi,{value:"all",children:"All"}),(0,s.jsx)(o.Xi,{value:"expense",children:"Expenses"}),(0,s.jsx)(o.Xi,{value:"income",children:"Income"})]})}),(0,s.jsx)(o.tU,{value:a,onValueChange:n,children:(0,s.jsxs)(o.j7,{children:[(0,s.jsx)(o.Xi,{value:"all",children:"All"}),(0,s.jsx)(o.Xi,{value:"personal",children:"Personal"}),(0,s.jsx)(o.Xi,{value:"family",children:"Family"})]})})]})}var l=a(6123),u=a(5770),d=a.n(u),h=a(2115);function m(t){let{transaction:e}=t,a=e.transaction.createdAt?new Date(e.transaction.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"";return(0,s.jsx)(d(),{href:"/transactions/".concat(e.id,"?type=").concat(e.type),children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg hover:bg-surface-variant transition-colors cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full flex items-center justify-center text-sm font-medium ".concat("expense"===e.type?"bg-expense/10 text-expense":"bg-income/10 text-income"),children:"expense"===e.type?"−":"+"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-text",children:e.category.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs text-text-secondary",children:a}),e.store&&(0,s.jsxs)("span",{className:"text-xs text-text-secondary",children:["\xb7 ",e.store.name]}),"FAMILY"===e.scope&&(0,s.jsx)(h.E,{variant:"secondary",className:"text-[10px] py-0",children:"Family"})]})]})]}),(0,s.jsxs)("span",{className:"text-sm font-semibold ".concat("expense"===e.type?"text-expense":"text-income"),children:["expense"===e.type?"−":"+",(0,l.vv)(e.transaction.value)]})]})})}function p(t){let{monthLabel:e,total:a,transactions:i}=t;return(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-2",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-text",children:e}),(0,s.jsx)("span",{className:"text-sm text-text-secondary",children:(0,l.vv)(a)})]}),(0,s.jsx)("div",{className:"space-y-0.5",children:i.map(t=>(0,s.jsx)(m,{transaction:t},t.id))})]})}var f=a(3056);function y(t){let{transactions:e,isLoading:a}=t;if(a)return(0,s.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((t,e)=>(0,s.jsx)("div",{className:"h-16 rounded-lg bg-surface-variant animate-pulse"},e))});if(0===e.length)return(0,s.jsx)(f.Zp,{className:"p-8 text-center",children:(0,s.jsx)("p",{className:"text-text-secondary",children:"No transactions found"})});let i=(0,n.vf)(e);return(0,s.jsx)("div",{className:"space-y-6",children:i.map(t=>(0,s.jsx)(p,{monthLabel:t.monthLabel,total:t.total,transactions:t.transactions},t.key))})}function v(){let[t,e]=(0,i.useState)("all"),[a,o]=(0,i.useState)("all"),{families:l}=(0,r.c)(),{data:u=[],isLoading:d}=(0,n.xG)({type:t,scope:a,familyId:null,categories:[],minAmount:"",maxAmount:"",dateFrom:null,dateTo:null},l),h=(0,i.useMemo)(()=>u.filter(e=>("all"===t||e.type===t)&&("personal"!==a||"PERSONAL"===e.scope)&&("family"!==a||"FAMILY"===e.scope)),[u,t,a]);return(0,s.jsxs)("div",{className:"space-y-6 max-w-4xl mx-auto",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-text",children:"Transactions"})}),(0,s.jsx)(c,{typeFilter:t,scopeFilter:a,onTypeChange:e,onScopeChange:o}),(0,s.jsx)(y,{transactions:h,isLoading:d})]})}},2115:(t,e,a)=>{"use strict";a.d(e,{E:()=>o});var s=a(4568);a(7620);var i=a(3686),n=a(2393);let r=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"border-transparent bg-primary text-white",secondary:"border-transparent bg-surface-variant text-text-secondary",destructive:"border-transparent bg-error text-white",outline:"text-text border-border",income:"border-transparent bg-income/10 text-income",expense:"border-transparent bg-expense/10 text-expense"}},defaultVariants:{variant:"default"}});function o(t){let{className:e,variant:a,...i}=t;return(0,s.jsx)("div",{className:(0,n.cn)(r({variant:a}),e),...i})}},3056:(t,e,a)=>{"use strict";a.d(e,{BT:()=>l,Wu:()=>u,ZB:()=>c,Zp:()=>r,aR:()=>o});var s=a(4568),i=a(7620),n=a(2393);let r=i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,s.jsx)("div",{ref:e,className:(0,n.cn)("rounded-xl border border-border bg-surface shadow-sm",a),...i})});r.displayName="Card";let o=i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,s.jsx)("div",{ref:e,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...i})});o.displayName="CardHeader";let c=i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,s.jsx)("div",{ref:e,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight text-text",a),...i})});c.displayName="CardTitle";let l=i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,s.jsx)("div",{ref:e,className:(0,n.cn)("text-sm text-text-secondary",a),...i})});l.displayName="CardDescription";let u=i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,s.jsx)("div",{ref:e,className:(0,n.cn)("p-6 pt-0",a),...i})});u.displayName="CardContent",i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,s.jsx)("div",{ref:e,className:(0,n.cn)("flex items-center p-6 pt-0",a),...i})}).displayName="CardFooter"},8202:(t,e,a)=>{"use strict";a.d(e,{Xi:()=>l,av:()=>u,j7:()=>c,tU:()=>o});var s=a(4568),i=a(7620),n=a(8420),r=a(2393);let o=n.bL,c=i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,s.jsx)(n.B8,{ref:e,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-lg bg-surface-variant p-1 text-text-secondary",a),...i})});c.displayName=n.B8.displayName;let l=i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,s.jsx)(n.l9,{ref:e,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-surface data-[state=active]:text-text data-[state=active]:shadow-sm cursor-pointer",a),...i})});l.displayName=n.l9.displayName;let u=i.forwardRef((t,e)=>{let{className:a,...i}=t;return(0,s.jsx)(n.UC,{ref:e,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",a),...i})});u.displayName=n.UC.displayName},4475:(t,e,a)=>{"use strict";a.d(e,{c:()=>o,n:()=>c});var s=a(8367),i=a(9857),n=a(5595),r=a(6284);function o(){let t=(0,s.jE)(),e=(0,i.I)({queryKey:["families"],queryFn:async()=>await r.u.get("/families")}),a=(0,i.I)({queryKey:["family-invitations-pending"],queryFn:async()=>await r.u.get("/families/invitations/pending")}),o=(0,n.n)({mutationFn:async t=>await r.u.post("/families",{name:t}),onSuccess:()=>{t.invalidateQueries({queryKey:["families"]})}}),c=(0,n.n)({mutationFn:async t=>{let{familyId:e,email:a}=t;await r.u.post("/families/".concat(e,"/invitations"),{inviteeEmail:a})}}),l=(0,n.n)({mutationFn:async t=>{let{familyId:e,userId:a}=t;await r.u.delete("/families/".concat(e,"/members/").concat(a))},onSuccess:()=>{t.invalidateQueries({queryKey:["families"]})}}),u=(0,n.n)({mutationFn:async t=>{await r.u.delete("/families/".concat(t,"/members/me"))},onSuccess:()=>{t.invalidateQueries({queryKey:["families"]})}}),d=(0,n.n)({mutationFn:async t=>{await r.u.post("/families/invitations/".concat(t,"/accept"),{})},onSuccess:()=>{t.invalidateQueries({queryKey:["families"]}),t.invalidateQueries({queryKey:["family-invitations-pending"]})}}),h=(0,n.n)({mutationFn:async t=>{await r.u.post("/families/invitations/".concat(t,"/decline"),{})},onSuccess:()=>{t.invalidateQueries({queryKey:["family-invitations-pending"]})}});return{families:e.data||[],pendingInvitations:a.data||[],isLoading:e.isLoading,createFamily:o,inviteMember:c,removeMember:l,leaveFamily:u,acceptInvitation:d,declineInvitation:h}}function c(t){return(0,i.I)({queryKey:["family",t],queryFn:async()=>await r.u.get("/families/".concat(t)),enabled:!!t})}},5138:(t,e,a)=>{"use strict";a.d(e,{GT:()=>o,vf:()=>r,xG:()=>n});var s=a(9857),i=a(6284);function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,s.I)({queryKey:["transactions",null==t?void 0:t.scope,null==t?void 0:t.familyId,e.length],queryFn:async()=>{let a={};(null==t?void 0:t.familyId)&&(a.familyId=t.familyId),(null==t?void 0:t.scope)&&"all"!==t.scope&&(a.scope=t.scope.toUpperCase());let[s,n]=await Promise.all([i.u.get("/expenses",a),i.u.get("/incomes",a)]),r=(null==t?void 0:t.familyId)?e.find(e=>e.id===t.familyId):void 0;return[...(s.data||[]).map(t=>(function(t,e){let a=t.transaction;return{id:t.id,type:"expense",category:t.category,store:t.store,scope:(null==a?void 0:a.scope)||"PERSONAL",familyId:null==a?void 0:a.familyId,family:e?{id:e.id,name:e.name}:void 0,transaction:{id:(null==a?void 0:a.id)||"",value:(null==a?void 0:a.value)||0,createdAt:null==a?void 0:a.createdAt,description:null==a?void 0:a.description,user:null==a?void 0:a.user},items:t.items,receiptImages:t.receiptImages||[]}})(t,r)),...(n.data||[]).map(t=>(function(t,e){let a=t.transaction;return{id:t.id,type:"income",category:t.category||{id:t.categoryId,name:"Income"},scope:(null==a?void 0:a.scope)||"PERSONAL",familyId:null==a?void 0:a.familyId,family:e?{id:e.id,name:e.name}:void 0,transaction:{id:t.transactionId||"",value:(null==a?void 0:a.value)||0,createdAt:(null==a?void 0:a.createdAt)||t.createdAt,description:null==a?void 0:a.description,user:null==a?void 0:a.user},receiptImages:t.receiptImages||[]}})(t,r))].sort((t,e)=>{let a=t.transaction.createdAt?new Date(t.transaction.createdAt).getTime():0;return(e.transaction.createdAt?new Date(e.transaction.createdAt).getTime():0)-a})}})}function r(t){let e={};return t.forEach(t=>{if(t.transaction.createdAt){let a=new Date(t.transaction.createdAt),s="".concat(a.getFullYear(),"-").concat(a.getMonth());e[s]||(e[s]=[]),e[s].push(t)}}),Object.entries(e).map(t=>{let[e,a]=t;return{key:e,monthLabel:new Date(a[0].transaction.createdAt).toLocaleDateString("en-US",{month:"long",year:"numeric"}),total:a.reduce((t,e)=>t+e.transaction.value,0),transactions:a}})}function o(t){let e=t.filter(t=>"expense"===t.type).reduce((t,e)=>t+e.transaction.value,0),a=t.filter(t=>"income"===t.type).reduce((t,e)=>t+e.transaction.value,0);return{totalExpenses:e,totalIncome:a,net:a-e,count:t.length}}},6284:(t,e,a)=>{"use strict";a.d(e,{u:()=>r});var s=a(2314);let i="http://localhost:3000";async function n(t){if(204===t.status)return null;let e=await t.text(),a={};try{a=e?JSON.parse(e):{}}catch(a){if(!t.ok)throw Error(e||"Request failed with status ".concat(t.status));throw Error("Invalid JSON response: ".concat(e))}if(!t.ok)throw Error((a&&"object"==typeof a&&"message"in a?String(a.message):null)||t.statusText||"Request failed with status ".concat(t.status));return a}let r={async get(t,e){let a=(0,s.gf)(),r={"Content-Type":"application/json"};a&&(r.Authorization="Bearer ".concat(a));let o="".concat(i).concat(t);if(e&&Object.keys(e).length>0){let t=Object.entries(e).filter(t=>{let[,e]=t;return null!=e}).map(t=>{let[e,a]=t;return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(a))}).join("&");t&&(o+="?".concat(t))}return n(await fetch(o,{method:"GET",headers:r}))},async post(t,e,a){let r=(0,s.gf)(),o={...(null==a?void 0:a.headers)||{}},c=e instanceof FormData;return c||o["Content-Type"]||(o["Content-Type"]="application/json"),r&&(o.Authorization="Bearer ".concat(r)),n(await fetch("".concat(i).concat(t),{method:"POST",headers:o,body:c?e:JSON.stringify(e)}))},async put(t,e,a){let r=(0,s.gf)(),o={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return r&&(o.Authorization="Bearer ".concat(r)),n(await fetch("".concat(i).concat(t),{method:"PUT",headers:o,body:JSON.stringify(e)}))},async patch(t,e,a){let r=(0,s.gf)(),o={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return r&&(o.Authorization="Bearer ".concat(r)),n(await fetch("".concat(i).concat(t),{method:"PATCH",headers:o,body:JSON.stringify(e)}))},async delete(t){let e=(0,s.gf)(),a={"Content-Type":"application/json"};return e&&(a.Authorization="Bearer ".concat(e)),n(await fetch("".concat(i).concat(t),{method:"DELETE",headers:a}))}}},2314:(t,e,a)=>{"use strict";a.d(e,{WG:()=>r,eF:()=>o,gf:()=>n});var s=a(6251);let i="token";function n(){var t;return null!==(t=s.A.get(i))&&void 0!==t?t:null}function r(t){s.A.set(i,t,{expires:30,sameSite:"lax"})}function o(){s.A.remove(i)}},2393:(t,e,a)=>{"use strict";a.d(e,{cn:()=>n});var s=a(5928),i=a(6564);function n(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,i.QP)((0,s.$)(e))}},6123:(t,e,a)=>{"use strict";a.d(e,{vv:()=>r,VZ:()=>o,X5:()=>i,O5:()=>n});var s=a(9772);let i=s.Ik({email:s.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:s.Yj().min(1,"Password is required")}),n=s.Ik({firstName:s.Yj().min(1,"First name is required").min(2,"First name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"First name can only contain letters"),lastName:s.Yj().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"Last name can only contain letters"),email:s.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:s.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Must contain at least one uppercase letter").regex(/[a-z]/,"Must contain at least one lowercase letter").regex(/[0-9]/,"Must contain at least one number").regex(/[^A-Za-z0-9]/,"Must contain at least one special character"),confirmPassword:s.Yj().min(1,"Please confirm your password")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords must match",path:["confirmPassword"]});function r(t){return"$".concat(t.toFixed(2))}function o(t){return t%1==0?t.toString():t.toFixed(3).replace(/\.?0+$/,"")}},8420:(t,e,a)=>{"use strict";a.d(e,{B8:()=>S,UC:()=>E,bL:()=>P,l9:()=>O});var s=a(7620),i=a(6029),n=a(7645),r=a(2520),o=a(7429),c=a(1864),l=a(2919),u=a(4537),d=a(7705),h=a(4568),m="Tabs",[p,f]=(0,n.A)(m,[r.RG]),y=(0,r.RG)(),[v,x]=p(m),b=s.forwardRef((t,e)=>{let{__scopeTabs:a,value:s,onValueChange:i,defaultValue:n,orientation:r="horizontal",dir:o,activationMode:p="automatic",...f}=t,y=(0,l.jH)(o),[x,b]=(0,u.i)({prop:s,onChange:i,defaultProp:null!=n?n:"",caller:m});return(0,h.jsx)(v,{scope:a,baseId:(0,d.B)(),value:x,onValueChange:b,orientation:r,dir:y,activationMode:p,children:(0,h.jsx)(c.sG.div,{dir:y,"data-orientation":r,...f,ref:e})})});b.displayName=m;var g="TabsList",j=s.forwardRef((t,e)=>{let{__scopeTabs:a,loop:s=!0,...i}=t,n=x(g,a),o=y(a);return(0,h.jsx)(r.bL,{asChild:!0,...o,orientation:n.orientation,dir:n.dir,loop:s,children:(0,h.jsx)(c.sG.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:e})})});j.displayName=g;var w="TabsTrigger",N=s.forwardRef((t,e)=>{let{__scopeTabs:a,value:s,disabled:n=!1,...o}=t,l=x(w,a),u=y(a),d=A(l.baseId,s),m=I(l.baseId,s),p=s===l.value;return(0,h.jsx)(r.q7,{asChild:!0,...u,focusable:!n,active:p,children:(0,h.jsx)(c.sG.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":m,"data-state":p?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:d,...o,ref:e,onMouseDown:(0,i.mK)(t.onMouseDown,t=>{n||0!==t.button||!1!==t.ctrlKey?t.preventDefault():l.onValueChange(s)}),onKeyDown:(0,i.mK)(t.onKeyDown,t=>{[" ","Enter"].includes(t.key)&&l.onValueChange(s)}),onFocus:(0,i.mK)(t.onFocus,()=>{let t="manual"!==l.activationMode;p||n||!t||l.onValueChange(s)})})})});N.displayName=w;var C="TabsContent",R=s.forwardRef((t,e)=>{let{__scopeTabs:a,value:i,forceMount:n,children:r,...l}=t,u=x(C,a),d=A(u.baseId,i),m=I(u.baseId,i),p=i===u.value,f=s.useRef(p);return s.useEffect(()=>{let t=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(t)},[]),(0,h.jsx)(o.C,{present:n||p,children:a=>{let{present:s}=a;return(0,h.jsx)(c.sG.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!s,id:m,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:s&&r})}})});function A(t,e){return"".concat(t,"-trigger-").concat(e)}function I(t,e){return"".concat(t,"-content-").concat(e)}R.displayName=C;var P=b,S=j,O=N,E=R},1140:(t,e,a)=>{"use strict";a.d(e,{$:()=>o,s:()=>r});var s=a(3321),i=a(136),n=a(2820),r=class extends i.k{#t;#e;#a;#s;constructor(t){super(),this.#t=t.client,this.mutationId=t.mutationId,this.#a=t.mutationCache,this.#e=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#a.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#a.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#a.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){let e=()=>{this.#i({type:"continue"})},a={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=(0,n.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(t,a):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#i({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#a.canRun(this)});let s="pending"===this.state.status,i=!this.#s.canStart();try{if(s)e();else{this.#i({type:"pending",variables:t,isPaused:i}),this.#a.config.onMutate&&await this.#a.config.onMutate(t,this,a);let e=await this.options.onMutate?.(t,a);e!==this.state.context&&this.#i({type:"pending",context:e,variables:t,isPaused:i})}let n=await this.#s.start();return await this.#a.config.onSuccess?.(n,t,this.state.context,this,a),await this.options.onSuccess?.(n,t,this.state.context,a),await this.#a.config.onSettled?.(n,null,this.state.variables,this.state.context,this,a),await this.options.onSettled?.(n,null,t,this.state.context,a),this.#i({type:"success",data:n}),n}catch(e){try{await this.#a.config.onError?.(e,t,this.state.context,this,a)}catch(t){Promise.reject(t)}try{await this.options.onError?.(e,t,this.state.context,a)}catch(t){Promise.reject(t)}try{await this.#a.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this,a)}catch(t){Promise.reject(t)}try{await this.options.onSettled?.(void 0,e,t,this.state.context,a)}catch(t){Promise.reject(t)}throw this.#i({type:"error",error:e}),e}finally{this.#a.runNext(this)}}#i(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),s.jG.batch(()=>{this.#e.forEach(e=>{e.onMutationUpdate(t)}),this.#a.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},5595:(t,e,a)=>{"use strict";a.d(e,{n:()=>u});var s=a(7620),i=a(1140),n=a(3321),r=a(4034),o=a(9051),c=class extends r.Q{#t;#n=void 0;#r;#o;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#c()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.EN)(e.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#c(),this.#l(t)}getCurrentResult(){return this.#n}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#c(),this.#l()}mutate(t,e){return this.#o=e,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#c(){let t=this.#r?.state??(0,i.$)();this.#n={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#l(t){n.jG.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#n.variables,a=this.#n.context,s={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#o.onSuccess?.(t.data,e,a,s)}catch(t){Promise.reject(t)}try{this.#o.onSettled?.(t.data,null,e,a,s)}catch(t){Promise.reject(t)}}else if(t?.type==="error"){try{this.#o.onError?.(t.error,e,a,s)}catch(t){Promise.reject(t)}try{this.#o.onSettled?.(void 0,t.error,e,a,s)}catch(t){Promise.reject(t)}}}this.listeners.forEach(t=>{t(this.#n)})})}},l=a(8367);function u(t,e){let a=(0,l.jE)(e),[i]=s.useState(()=>new c(a,t));s.useEffect(()=>{i.setOptions(t)},[i,t]);let r=s.useSyncExternalStore(s.useCallback(t=>i.subscribe(n.jG.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=s.useCallback((t,e)=>{i.mutate(t,e).catch(o.lQ)},[i]);if(r.error&&(0,o.GU)(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:u,mutateAsync:r.mutate}}}},t=>{var e=e=>t(t.s=e);t.O(0,[959,999,857,772,770,961,520,587,855,358],()=>e(8515)),_N_E=t.O()}]);