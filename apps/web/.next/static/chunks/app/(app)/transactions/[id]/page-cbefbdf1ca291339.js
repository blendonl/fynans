(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[537],{6699:(e,t,a)=>{Promise.resolve().then(a.bind(a,1826))},1826:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>es});var r=a(4568),s=a(7620),n=a(3311),i=a(8367),l=a(9857),o=a(5595),c=a(3905),d=a(6284),m=a(4458),u=a(5677),x=a(6123),p=a(2115),f=a(3056);a(7509);var h=a(7680),y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,h.TL)(`Primitive.${t}`),n=s.forwardRef((e,s)=>{let{asChild:n,...i}=e,l=n?a:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(l,{...i,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),v="horizontal",g=["horizontal","vertical"],j=s.forwardRef((e,t)=>{let{decorative:a,orientation:s=v,...n}=e,i=g.includes(s)?s:v;return(0,r.jsx)(y.div,{"data-orientation":i,...a?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"},...n,ref:t})});j.displayName="Separator";var b=a(2393);let N=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:n=!0,...i}=e;return(0,r.jsx)(j,{ref:t,decorative:n,orientation:s,className:(0,b.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...i})});N.displayName=j.displayName;var w=a(7645),A=a(6329),R=a(7141),C=a(6029),D=Symbol("radix.slottable"),k="AlertDialog",[S,P]=(0,w.A)(k,[R.Hs]),T=(0,R.Hs)(),E=e=>{let{__scopeAlertDialog:t,...a}=e,s=T(t);return(0,r.jsx)(R.bL,{...s,...a,modal:!0})};E.displayName=k;var z=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,n=T(a);return(0,r.jsx)(R.l9,{...n,...s,ref:t})});z.displayName="AlertDialogTrigger";var I=e=>{let{__scopeAlertDialog:t,...a}=e,s=T(t);return(0,r.jsx)(R.ZL,{...s,...a})};I.displayName="AlertDialogPortal";var F=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,n=T(a);return(0,r.jsx)(R.hJ,{...n,...s,ref:t})});F.displayName="AlertDialogOverlay";var O="AlertDialogContent",[B,q]=S(O),Z=function(e){let t=({children:e})=>(0,r.jsx)(r.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=D,t}("AlertDialogContent"),$=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,children:n,...i}=e,l=T(a),o=s.useRef(null),c=(0,A.s)(t,o),d=s.useRef(null);return(0,r.jsx)(R.G$,{contentName:O,titleName:L,docsSlug:"alert-dialog",children:(0,r.jsx)(B,{scope:a,cancelRef:d,children:(0,r.jsxs)(R.UC,{role:"alertdialog",...l,...i,ref:c,onOpenAutoFocus:(0,C.mK)(i.onOpenAutoFocus,e=>{var t;e.preventDefault(),null===(t=d.current)||void 0===t||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,r.jsx)(Z,{children:n}),(0,r.jsx)(U,{contentRef:o})]})})})});$.displayName=O;var L="AlertDialogTitle",Y=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,n=T(a);return(0,r.jsx)(R.hE,{...n,...s,ref:t})});Y.displayName=L;var _="AlertDialogDescription",J=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,n=T(a);return(0,r.jsx)(R.VY,{...n,...s,ref:t})});J.displayName=_;var M=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,n=T(a);return(0,r.jsx)(R.bm,{...n,...s,ref:t})});M.displayName="AlertDialogAction";var W="AlertDialogCancel",H=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...s}=e,{cancelRef:n}=q(W,a),i=T(a),l=(0,A.s)(t,n);return(0,r.jsx)(R.bm,{...i,...s,ref:l})});H.displayName=W;var U=e=>{let{contentRef:t}=e,a="`".concat(O,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(O,"` by passing a `").concat(_,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(O,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return s.useEffect(()=>{var e;document.getElementById(null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby"))||console.warn(a)},[a,t]),null};let V=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(F,{className:(0,b.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out",a),...s,ref:t})});V.displayName=F.displayName;let G=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(I,{children:[(0,r.jsx)(V,{}),(0,r.jsx)($,{ref:t,className:(0,b.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-surface p-6 shadow-lg duration-200 rounded-xl",a),...s})]})});G.displayName=$.displayName;let K=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,b.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})},Q=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,b.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})},X=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(Y,{ref:t,className:(0,b.cn)("text-lg font-semibold text-text",a),...s})});X.displayName=Y.displayName;let ee=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(J,{ref:t,className:(0,b.cn)("text-sm text-text-secondary",a),...s})});ee.displayName=J.displayName;let et=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(M,{ref:t,className:(0,b.cn)((0,m.r)(),a),...s})});et.displayName=M.displayName;let ea=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(H,{ref:t,className:(0,b.cn)((0,m.r)({variant:"outline"}),a),...s})});function er(e){let{transaction:t,onDelete:a,isDeleting:s}=e,n=t.transaction.createdAt?new Date(t.transaction.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(f.Zp,{children:[(0,r.jsxs)(f.aR,{className:"text-center pb-2",children:[(0,r.jsx)(p.E,{variant:"expense"===t.type?"expense":"income",className:"mx-auto mb-2",children:"expense"===t.type?"Expense":"Income"}),(0,r.jsxs)("p",{className:"text-4xl font-bold ".concat("expense"===t.type?"text-expense":"text-income"),children:["expense"===t.type?"âˆ’":"+",(0,x.vv)(t.transaction.value)]}),(0,r.jsx)("p",{className:"text-sm text-text-secondary mt-2",children:n})]}),(0,r.jsxs)(f.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-text-secondary",children:"Category"}),(0,r.jsx)("p",{className:"text-sm font-medium text-text",children:t.category.name})]}),t.store&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-text-secondary",children:"Store"}),(0,r.jsx)("p",{className:"text-sm font-medium text-text",children:t.store.name}),t.store.location&&(0,r.jsx)("p",{className:"text-xs text-text-secondary",children:t.store.location})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-text-secondary",children:"Scope"}),(0,r.jsx)("p",{className:"text-sm font-medium text-text",children:t.scope})]}),t.transaction.user&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-text-secondary",children:"By"}),(0,r.jsxs)("p",{className:"text-sm font-medium text-text",children:[t.transaction.user.firstName," ",t.transaction.user.lastName]})]})]}),t.transaction.description&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-text-secondary",children:"Description"}),(0,r.jsx)("p",{className:"text-sm text-text",children:t.transaction.description})]})]})]})]}),t.items&&t.items.length>0&&(0,r.jsxs)(f.Zp,{children:[(0,r.jsx)(f.aR,{children:(0,r.jsxs)(f.ZB,{children:["Items (",t.items.length,")"]})}),(0,r.jsx)(f.Wu,{children:(0,r.jsx)("div",{className:"space-y-3",children:t.items.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-text",children:e.name}),(0,r.jsxs)("p",{className:"text-xs text-text-secondary",children:["Qty: ",e.quantity,e.discount?" \xb7 Discount: ".concat((0,x.vv)(e.discount)):""]})]}),(0,r.jsx)("p",{className:"text-sm font-medium text-text",children:(0,x.vv)(e.price*e.quantity)})]},t))})})]}),t.receiptImages&&t.receiptImages.length>0&&(0,r.jsxs)(f.Zp,{children:[(0,r.jsx)(f.aR,{children:(0,r.jsx)(f.ZB,{children:"Receipts"})}),(0,r.jsx)(f.Wu,{children:(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:t.receiptImages.map((e,t)=>(0,r.jsx)("img",{src:e,alt:"Receipt ".concat(t+1),className:"rounded-lg border border-border object-cover w-full"},t))})})]}),(0,r.jsxs)(E,{children:[(0,r.jsx)(z,{asChild:!0,children:(0,r.jsxs)(m.$,{variant:"destructive",className:"w-full",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Delete Transaction"]})}),(0,r.jsxs)(G,{children:[(0,r.jsxs)(K,{children:[(0,r.jsx)(X,{children:"Delete transaction?"}),(0,r.jsx)(ee,{children:"This action cannot be undone. This will permanently delete this transaction."})]}),(0,r.jsxs)(Q,{children:[(0,r.jsx)(ea,{children:"Cancel"}),(0,r.jsx)(et,{onClick:a,disabled:s,children:s?"Deleting...":"Delete"})]})]})]})]})}function es(e){let{params:t}=e,{id:a}=(0,s.use)(t),u=(0,n.useRouter)(),x=(0,n.useSearchParams)(),p=(0,i.jE)(),f=x.get("type")||"expense",h="income"===f?"/incomes":"/expenses",{data:y,isLoading:v}=(0,l.I)({queryKey:["transaction",a,f],queryFn:async()=>{let e=await d.u.get("".concat(h,"/").concat(a)),t=e.transaction;return{id:e.id,type:f,category:e.category,store:e.store,scope:(null==t?void 0:t.scope)||"PERSONAL",familyId:null==t?void 0:t.familyId,transaction:{id:(null==t?void 0:t.id)||"",value:(null==t?void 0:t.value)||0,createdAt:null==t?void 0:t.createdAt,description:null==t?void 0:t.description,user:null==t?void 0:t.user},items:e.items,receiptImages:e.receiptImages||[]}}}),g=(0,o.n)({mutationFn:async()=>{await d.u.delete("".concat(h,"/").concat(a))},onSuccess:()=>{p.invalidateQueries({queryKey:["transactions"]}),u.push("/transactions")}});return v?(0,r.jsx)("div",{className:"max-w-2xl mx-auto space-y-4",children:(0,r.jsx)("div",{className:"h-48 rounded-xl bg-surface-variant animate-pulse"})}):y?(0,r.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,r.jsxs)(m.$,{variant:"ghost",onClick:()=>u.back(),children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,r.jsx)(er,{transaction:y,onDelete:()=>g.mutate(),isDeleting:g.isPending})]}):(0,r.jsx)("div",{className:"max-w-2xl mx-auto text-center py-12",children:(0,r.jsx)("p",{className:"text-text-secondary",children:"Transaction not found"})})}ea.displayName=H.displayName},2115:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var r=a(4568);a(7620);var s=a(3686),n=a(2393);let i=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"border-transparent bg-primary text-white",secondary:"border-transparent bg-surface-variant text-text-secondary",destructive:"border-transparent bg-error text-white",outline:"text-text border-border",income:"border-transparent bg-income/10 text-income",expense:"border-transparent bg-expense/10 text-expense"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:a}),t),...s})}},4458:(e,t,a)=>{"use strict";a.d(t,{$:()=>c,r:()=>o});var r=a(4568),s=a(7620),n=a(7680),i=a(3686),l=a(2393);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:pointer-events-none disabled:opacity-50 cursor-pointer",{variants:{variant:{default:"bg-primary text-white hover:bg-primary-variant shadow-sm",destructive:"bg-error text-white hover:bg-error/90 shadow-sm",outline:"border border-border bg-surface hover:bg-surface-variant text-text",secondary:"bg-surface-variant text-text hover:bg-surface-variant/80",ghost:"hover:bg-surface-variant text-text",link:"text-primary underline-offset-4 hover:underline",income:"bg-income text-white hover:bg-income-light shadow-sm",expense:"bg-expense text-white hover:bg-expense-light shadow-sm"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:c=!1,loading:d,children:m,disabled:u,...x}=e,p=c?n.DX:"button";return(0,r.jsxs)(p,{className:(0,l.cn)(o({variant:s,size:i,className:a})),ref:t,disabled:u||d,...x,children:[d&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),m]})});c.displayName="Button"},3056:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>l});var r=a(4568),s=a(7620),n=a(2393);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border border-border bg-surface shadow-sm",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight text-text",a),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-text-secondary",a),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},6284:(e,t,a)=>{"use strict";a.d(t,{u:()=>i});var r=a(2314);let s="http://localhost:3000";async function n(e){if(204===e.status)return null;let t=await e.text(),a={};try{a=t?JSON.parse(t):{}}catch(a){if(!e.ok)throw Error(t||"Request failed with status ".concat(e.status));throw Error("Invalid JSON response: ".concat(t))}if(!e.ok)throw Error((a&&"object"==typeof a&&"message"in a?String(a.message):null)||e.statusText||"Request failed with status ".concat(e.status));return a}let i={async get(e,t){let a=(0,r.gf)(),i={"Content-Type":"application/json"};a&&(i.Authorization="Bearer ".concat(a));let l="".concat(s).concat(e);if(t&&Object.keys(t).length>0){let e=Object.entries(t).filter(e=>{let[,t]=e;return null!=t}).map(e=>{let[t,a]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(a))}).join("&");e&&(l+="?".concat(e))}return n(await fetch(l,{method:"GET",headers:i}))},async post(e,t,a){let i=(0,r.gf)(),l={...(null==a?void 0:a.headers)||{}},o=t instanceof FormData;return o||l["Content-Type"]||(l["Content-Type"]="application/json"),i&&(l.Authorization="Bearer ".concat(i)),n(await fetch("".concat(s).concat(e),{method:"POST",headers:l,body:o?t:JSON.stringify(t)}))},async put(e,t,a){let i=(0,r.gf)(),l={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return i&&(l.Authorization="Bearer ".concat(i)),n(await fetch("".concat(s).concat(e),{method:"PUT",headers:l,body:JSON.stringify(t)}))},async patch(e,t,a){let i=(0,r.gf)(),l={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return i&&(l.Authorization="Bearer ".concat(i)),n(await fetch("".concat(s).concat(e),{method:"PATCH",headers:l,body:JSON.stringify(t)}))},async delete(e){let t=(0,r.gf)(),a={"Content-Type":"application/json"};return t&&(a.Authorization="Bearer ".concat(t)),n(await fetch("".concat(s).concat(e),{method:"DELETE",headers:a}))}}},2314:(e,t,a)=>{"use strict";a.d(t,{WG:()=>i,eF:()=>l,gf:()=>n});var r=a(6251);let s="token";function n(){var e;return null!==(e=r.A.get(s))&&void 0!==e?e:null}function i(e){r.A.set(s,e,{expires:30,sameSite:"lax"})}function l(){r.A.remove(s)}},2393:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(5928),s=a(6564);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},3905:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(6922).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6123:(e,t,a)=>{"use strict";a.d(t,{vv:()=>i,VZ:()=>l,X5:()=>s,O5:()=>n});var r=a(9772);let s=r.Ik({email:r.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:r.Yj().min(1,"Password is required")}),n=r.Ik({firstName:r.Yj().min(1,"First name is required").min(2,"First name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"First name can only contain letters"),lastName:r.Yj().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"Last name can only contain letters"),email:r.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:r.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Must contain at least one uppercase letter").regex(/[a-z]/,"Must contain at least one lowercase letter").regex(/[0-9]/,"Must contain at least one number").regex(/[^A-Za-z0-9]/,"Must contain at least one special character"),confirmPassword:r.Yj().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords must match",path:["confirmPassword"]});function i(e){return"$".concat(e.toFixed(2))}function l(e){return e%1==0?e.toString():e.toFixed(3).replace(/\.?0+$/,"")}}},e=>{var t=t=>e(e.s=t);e.O(0,[959,999,857,772,961,70,739,587,855,358],()=>t(6699)),_N_E=e.O()}]);