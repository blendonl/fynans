(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[944],{6358:(e,t,r)=>{Promise.resolve().then(r.bind(r,9976))},9976:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var a=r(4568),s=r(4269),n=r(5770),l=r.n(n),i=r(3311),o=r(6279),c=r(6830),d=r(3391),u=r(4889),f=r(5628),h=r(5477),m=r(6271),x=r(2393),p=r(7620),b=r(4243);let g=p.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(b.bL,{ref:t,className:(0,x.cn)("relative overflow-hidden",r),...n,children:[(0,a.jsx)(b.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,a.jsx)(y,{}),(0,a.jsx)(b.OK,{})]})});g.displayName=b.bL.displayName;let y=p.forwardRef((e,t)=>{let{className:r,orientation:s="vertical",...n}=e;return(0,a.jsx)(b.VM,{ref:t,orientation:s,className:(0,x.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...n,children:(0,a.jsx)(b.lr,{className:"relative flex-1 rounded-full bg-border"})})});y.displayName=b.VM.displayName;let N=[{href:"/",label:"Dashboard",icon:o.A},{href:"/transactions",label:"Transactions",icon:c.A},{href:"/add",label:"Add Transaction",icon:d.A},{href:"/analytics",label:"Analytics",icon:u.A},{href:"/families",label:"Families",icon:f.A},{href:"/notifications",label:"Notifications",icon:h.A},{href:"/profile",label:"Profile",icon:m.A}];function v(){let e=(0,i.usePathname)();return(0,a.jsxs)("aside",{className:"hidden md:flex w-64 flex-col border-r border-sidebar-border bg-sidebar-background",children:[(0,a.jsx)("div",{className:"flex h-16 items-center px-6 border-b border-sidebar-border",children:(0,a.jsxs)(l(),{href:"/",className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-[var(--gradient-primary-start)] to-[var(--gradient-primary-end)] flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:"M"})}),(0,a.jsx)("span",{className:"font-semibold text-lg text-sidebar-foreground",children:"MMoneyManager"})]})}),(0,a.jsx)(g,{className:"flex-1 px-3 py-4",children:(0,a.jsx)("nav",{className:"space-y-1",children:N.map(t=>{let r="/"===t.href?"/"===e:e.startsWith(t.href);return(0,a.jsxs)(l(),{href:t.href,className:(0,x.cn)("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-colors",r?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50 hover:text-sidebar-foreground"),children:[(0,a.jsx)(t.icon,{className:"h-5 w-5"}),t.label]},t.href)})})})]})}var j=r(914),w=r(8773),A=r(7987),k=r(9598),C=r(4458),R=r(6201),T=r(5004),z=r(6892),P=r(2596);let O=R.bL,E=R.l9;R.YJ,R.ZL,R.Pb,R.z6,p.forwardRef((e,t)=>{let{className:r,inset:s,children:n,...l}=e;return(0,a.jsxs)(R.ZP,{ref:t,className:(0,x.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-selection-bg",s&&"pl-8",r),...l,children:[n,(0,a.jsx)(T.A,{className:"ml-auto h-4 w-4"})]})}).displayName=R.ZP.displayName,p.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(R.G5,{ref:t,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-lg border border-border bg-surface p-1 text-text shadow-lg",r),...s})}).displayName=R.G5.displayName;let S=p.forwardRef((e,t)=>{let{className:r,sideOffset:s=4,...n}=e;return(0,a.jsx)(R.ZL,{children:(0,a.jsx)(R.UC,{ref:t,sideOffset:s,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-lg border border-border bg-surface p-1 text-text shadow-md",r),...n})})});S.displayName=R.UC.displayName;let M=p.forwardRef((e,t)=>{let{className:r,inset:s,...n}=e;return(0,a.jsx)(R.q7,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-selection-bg focus:text-text data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",r),...n})});M.displayName=R.q7.displayName,p.forwardRef((e,t)=>{let{className:r,children:s,checked:n,...l}=e;return(0,a.jsxs)(R.H_,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-selection-bg",r),checked:n,...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(R.VF,{children:(0,a.jsx)(z.A,{className:"h-4 w-4"})})}),s]})}).displayName=R.H_.displayName,p.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(R.hN,{ref:t,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-selection-bg",r),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(R.VF,{children:(0,a.jsx)(P.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=R.hN.displayName,p.forwardRef((e,t)=>{let{className:r,inset:s,...n}=e;return(0,a.jsx)(R.JU,{ref:t,className:(0,x.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",r),...n})}).displayName=R.JU.displayName;let F=p.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(R.wv,{ref:t,className:(0,x.cn)("-mx-1 my-1 h-px bg-border",r),...s})});function J(){var e,t;let{theme:r,setTheme:n}=(0,k.D)(),{user:l,logout:i}=(0,s.A)();return(0,a.jsxs)("header",{className:"flex h-16 items-center justify-between border-b border-border bg-surface px-6",children:[(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsx)("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-[var(--gradient-primary-start)] to-[var(--gradient-primary-end)] flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:"M"})})}),(0,a.jsx)("div",{className:"hidden md:block"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(C.$,{variant:"ghost",size:"icon",onClick:()=>n("dark"===r?"light":"dark"),children:[(0,a.jsx)(j.A,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(w.A,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),(0,a.jsxs)(O,{children:[(0,a.jsx)(E,{asChild:!0,children:(0,a.jsxs)(C.$,{variant:"ghost",className:"gap-2",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-sm font-medium text-primary",children:[null==l?void 0:null===(e=l.firstName)||void 0===e?void 0:e[0],null==l?void 0:null===(t=l.lastName)||void 0===t?void 0:t[0]]})}),(0,a.jsx)("span",{className:"hidden sm:inline text-sm",children:null==l?void 0:l.firstName})]})}),(0,a.jsxs)(S,{align:"end",children:[(0,a.jsxs)("div",{className:"px-2 py-1.5",children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:[null==l?void 0:l.firstName," ",null==l?void 0:l.lastName]}),(0,a.jsx)("p",{className:"text-xs text-text-secondary",children:null==l?void 0:l.email})]}),(0,a.jsx)(F,{}),(0,a.jsxs)(M,{onClick:i,className:"text-error cursor-pointer",children:[(0,a.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})]})}F.displayName=R.wv.displayName;let L=[{href:"/",label:"Home",icon:o.A},{href:"/transactions",label:"Transactions",icon:c.A},{href:"/add",label:"Add",icon:d.A},{href:"/analytics",label:"Analytics",icon:u.A},{href:"/profile",label:"Profile",icon:m.A}];function _(){let e=(0,i.usePathname)();return(0,a.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 border-t border-border bg-surface",children:(0,a.jsx)("div",{className:"flex items-center justify-around py-2",children:L.map(t=>{let r="/"===t.href?"/"===e:e.startsWith(t.href);return(0,a.jsxs)(l(),{href:t.href,className:(0,x.cn)("flex flex-col items-center gap-1 px-3 py-1 text-xs",r?"text-primary":"text-text-secondary"),children:[(0,a.jsx)(t.icon,{className:"h-5 w-5"}),t.label]},t.href)})})})}function B(e){let{children:t}=e,{isLoading:r}=(0,s.A)();return r?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(v,{}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,a.jsx)(J,{}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6 pb-20 md:pb-6",children:t})]}),(0,a.jsx)(_,{})]})}},4458:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>o});var a=r(4568),s=r(7620),n=r(7680),l=r(3686),i=r(2393);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:pointer-events-none disabled:opacity-50 cursor-pointer",{variants:{variant:{default:"bg-primary text-white hover:bg-primary-variant shadow-sm",destructive:"bg-error text-white hover:bg-error/90 shadow-sm",outline:"border border-border bg-surface hover:bg-surface-variant text-text",secondary:"bg-surface-variant text-text hover:bg-surface-variant/80",ghost:"hover:bg-surface-variant text-text",link:"text-primary underline-offset-4 hover:underline",income:"bg-income text-white hover:bg-income-light shadow-sm",expense:"bg-expense text-white hover:bg-expense-light shadow-sm"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:c=!1,loading:d,children:u,disabled:f,...h}=e,m=c?n.DX:"button";return(0,a.jsxs)(m,{className:(0,i.cn)(o({variant:s,size:l,className:r})),ref:t,disabled:f||d,...h,children:[d&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),u]})});c.displayName="Button"},6284:(e,t,r)=>{"use strict";r.d(t,{u:()=>l});var a=r(2314);let s="http://localhost:3000";async function n(e){if(204===e.status)return null;let t=await e.text(),r={};try{r=t?JSON.parse(t):{}}catch(r){if(!e.ok)throw Error(t||"Request failed with status ".concat(e.status));throw Error("Invalid JSON response: ".concat(t))}if(!e.ok)throw Error((r&&"object"==typeof r&&"message"in r?String(r.message):null)||e.statusText||"Request failed with status ".concat(e.status));return r}let l={async get(e,t){let r=(0,a.gf)(),l={"Content-Type":"application/json"};r&&(l.Authorization="Bearer ".concat(r));let i="".concat(s).concat(e);if(t&&Object.keys(t).length>0){let e=Object.entries(t).filter(e=>{let[,t]=e;return null!=t}).map(e=>{let[t,r]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r))}).join("&");e&&(i+="?".concat(e))}return n(await fetch(i,{method:"GET",headers:l}))},async post(e,t,r){let l=(0,a.gf)(),i={...(null==r?void 0:r.headers)||{}},o=t instanceof FormData;return o||i["Content-Type"]||(i["Content-Type"]="application/json"),l&&(i.Authorization="Bearer ".concat(l)),n(await fetch("".concat(s).concat(e),{method:"POST",headers:i,body:o?t:JSON.stringify(t)}))},async put(e,t,r){let l=(0,a.gf)(),i={"Content-Type":"application/json",...(null==r?void 0:r.headers)||{}};return l&&(i.Authorization="Bearer ".concat(l)),n(await fetch("".concat(s).concat(e),{method:"PUT",headers:i,body:JSON.stringify(t)}))},async patch(e,t,r){let l=(0,a.gf)(),i={"Content-Type":"application/json",...(null==r?void 0:r.headers)||{}};return l&&(i.Authorization="Bearer ".concat(l)),n(await fetch("".concat(s).concat(e),{method:"PATCH",headers:i,body:JSON.stringify(t)}))},async delete(e){let t=(0,a.gf)(),r={"Content-Type":"application/json"};return t&&(r.Authorization="Bearer ".concat(t)),n(await fetch("".concat(s).concat(e),{method:"DELETE",headers:r}))}}},2314:(e,t,r)=>{"use strict";r.d(t,{WG:()=>l,eF:()=>i,gf:()=>n});var a=r(6251);let s="token";function n(){var e;return null!==(e=a.A.get(s))&&void 0!==e?e:null}function l(e){a.A.set(s,e,{expires:30,sameSite:"lax"})}function i(){a.A.remove(s)}},2393:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(5928),s=r(6564);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},4269:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>c});var a=r(4568),s=r(7620),n=r(3311),l=r(6284),i=r(2314);let o=(0,s.createContext)({});function c(e){let{children:t}=e,r=(0,n.useRouter)(),[c,d]=(0,s.useState)(null),[u,f]=(0,s.useState)(null),[h,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,i.gf)();e?(f(e),l.u.get("/auth/me").then(e=>d(e)).catch(()=>{(0,i.eF)(),f(null)}).finally(()=>m(!1))):m(!1)},[]);let x=(0,s.useCallback)(async(e,t)=>{let a=await l.u.post("/auth/login",{email:e,password:t});(0,i.WG)(a.token),f(a.token),d(a.user),r.push("/")},[r]),p=(0,s.useCallback)(async e=>{let t=await l.u.post("/auth/register",e);(0,i.WG)(t.token),f(t.token),d(t.user),r.push("/")},[r]),b=(0,s.useCallback)(async()=>{try{await l.u.post("/auth/logout",{})}catch(e){}(0,i.eF)(),f(null),d(null),r.push("/login")},[r]);return(0,a.jsx)(o.Provider,{value:{user:c,token:u,isLoading:h,login:x,register:p,logout:b},children:t})}function d(){return(0,s.useContext)(o)}}},e=>{var t=t=>e(e.s=t);e.O(0,[959,770,961,70,520,607,197,587,855,358],()=>t(6358)),_N_E=e.O()}]);