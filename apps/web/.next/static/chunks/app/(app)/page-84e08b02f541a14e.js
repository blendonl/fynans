(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[415],{5151:(e,t,a)=>{Promise.resolve().then(a.bind(a,9686))},9686:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var r=a(4568),s=a(4269),n=a(5138),i=a(6922);let l=(0,i.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),c=(0,i.A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),o=(0,i.A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var d=a(3473),u=a(6123);function m(e){let{totalIncome:t,totalExpenses:a,net:s,count:n}=e;return(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)(d.j,{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg bg-income/10 flex items-center justify-center",children:(0,r.jsx)(l,{className:"h-5 w-5 text-income"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-text-secondary",children:"Income"}),(0,r.jsx)("p",{className:"text-xl font-bold text-income",children:(0,u.vv)(t)})]})]})}),(0,r.jsx)(d.j,{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg bg-expense/10 flex items-center justify-center",children:(0,r.jsx)(c,{className:"h-5 w-5 text-expense"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-text-secondary",children:"Expenses"}),(0,r.jsx)("p",{className:"text-xl font-bold text-expense",children:(0,u.vv)(a)})]})]})}),(0,r.jsx)(d.j,{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,r.jsx)(o,{className:"h-5 w-5 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-text-secondary",children:"Net"}),(0,r.jsx)("p",{className:"text-xl font-bold ".concat(s>=0?"text-income":"text-expense"),children:(0,u.vv)(s)})]})]})}),(0,r.jsx)(d.j,{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg bg-info/10 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-info font-bold text-sm",children:"#"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-text-secondary",children:"Transactions"}),(0,r.jsx)("p",{className:"text-xl font-bold text-text",children:n})]})]})})]})}var h=a(5770),x=a.n(h),p=a(3391),f=a(6830),y=a(4889),v=a(6271),g=a(3056);let j=[{href:"/add",label:"Add Transaction",icon:p.A,color:"text-primary"},{href:"/transactions",label:"View All",icon:f.A,color:"text-info"},{href:"/analytics",label:"Analytics",icon:y.A,color:"text-success"},{href:"/profile",label:"Profile",icon:v.A,color:"text-warning"}];function w(){return(0,r.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:j.map(e=>(0,r.jsx)(x(),{href:e.href,children:(0,r.jsx)(g.Zp,{className:"hover:shadow-md transition-shadow cursor-pointer h-full",children:(0,r.jsxs)(g.Wu,{className:"flex flex-col items-center gap-3 p-6",children:[(0,r.jsx)(e.icon,{className:"h-8 w-8 ".concat(e.color)}),(0,r.jsx)("span",{className:"text-sm font-medium text-text",children:e.label})]})})},e.href))})}function N(){let{user:e}=(0,s.A)(),{data:t=[],isLoading:a}=(0,n.xG)(),i=(0,n.GT)(t);return(0,r.jsxs)("div",{className:"space-y-8 max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-text",children:["Welcome back, ",null==e?void 0:e.firstName]}),(0,r.jsx)("p",{className:"text-text-secondary mt-1",children:"Here's your financial overview"})]}),a?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"h-24 rounded-xl bg-surface-variant animate-pulse"},t))}):(0,r.jsx)(m,{...i}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-text mb-4",children:"Quick Actions"}),(0,r.jsx)(w,{})]})]})}},3473:(e,t,a)=>{"use strict";a.d(t,{j:()=>n});var r=a(4568),s=a(2393);function n(e){let{className:t,variant:a="default",children:n,...i}=e;return(0,r.jsx)("div",{className:(0,s.cn)("rounded-xl border border-glass-border backdrop-blur-xl shadow-lg","default"===a?"bg-glass-bg":"bg-glass-bg-strong",t),...i,children:n})}},3056:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>i,aR:()=>l});var r=a(4568),s=a(7620),n=a(2393);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border border-border bg-surface shadow-sm",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight text-text",a),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-text-secondary",a),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},5138:(e,t,a)=>{"use strict";a.d(t,{GT:()=>l,vf:()=>i,xG:()=>n});var r=a(9857),s=a(6284);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,r.I)({queryKey:["transactions",null==e?void 0:e.scope,null==e?void 0:e.familyId,t.length],queryFn:async()=>{let a={};(null==e?void 0:e.familyId)&&(a.familyId=e.familyId),(null==e?void 0:e.scope)&&"all"!==e.scope&&(a.scope=e.scope.toUpperCase());let[r,n]=await Promise.all([s.u.get("/expenses",a),s.u.get("/incomes",a)]),i=(null==e?void 0:e.familyId)?t.find(t=>t.id===e.familyId):void 0;return[...(r.data||[]).map(e=>(function(e,t){let a=e.transaction;return{id:e.id,type:"expense",category:e.category,store:e.store,scope:(null==a?void 0:a.scope)||"PERSONAL",familyId:null==a?void 0:a.familyId,family:t?{id:t.id,name:t.name}:void 0,transaction:{id:(null==a?void 0:a.id)||"",value:(null==a?void 0:a.value)||0,createdAt:null==a?void 0:a.createdAt,description:null==a?void 0:a.description,user:null==a?void 0:a.user},items:e.items,receiptImages:e.receiptImages||[]}})(e,i)),...(n.data||[]).map(e=>(function(e,t){let a=e.transaction;return{id:e.id,type:"income",category:e.category||{id:e.categoryId,name:"Income"},scope:(null==a?void 0:a.scope)||"PERSONAL",familyId:null==a?void 0:a.familyId,family:t?{id:t.id,name:t.name}:void 0,transaction:{id:e.transactionId||"",value:(null==a?void 0:a.value)||0,createdAt:(null==a?void 0:a.createdAt)||e.createdAt,description:null==a?void 0:a.description,user:null==a?void 0:a.user},receiptImages:e.receiptImages||[]}})(e,i))].sort((e,t)=>{let a=e.transaction.createdAt?new Date(e.transaction.createdAt).getTime():0;return(t.transaction.createdAt?new Date(t.transaction.createdAt).getTime():0)-a})}})}function i(e){let t={};return e.forEach(e=>{if(e.transaction.createdAt){let a=new Date(e.transaction.createdAt),r="".concat(a.getFullYear(),"-").concat(a.getMonth());t[r]||(t[r]=[]),t[r].push(e)}}),Object.entries(t).map(e=>{let[t,a]=e;return{key:t,monthLabel:new Date(a[0].transaction.createdAt).toLocaleDateString("en-US",{month:"long",year:"numeric"}),total:a.reduce((e,t)=>e+t.transaction.value,0),transactions:a}})}function l(e){let t=e.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.transaction.value,0),a=e.filter(e=>"income"===e.type).reduce((e,t)=>e+t.transaction.value,0);return{totalExpenses:t,totalIncome:a,net:a-t,count:e.length}}},6284:(e,t,a)=>{"use strict";a.d(t,{u:()=>i});var r=a(2314);let s="http://localhost:3000";async function n(e){if(204===e.status)return null;let t=await e.text(),a={};try{a=t?JSON.parse(t):{}}catch(a){if(!e.ok)throw Error(t||"Request failed with status ".concat(e.status));throw Error("Invalid JSON response: ".concat(t))}if(!e.ok)throw Error((a&&"object"==typeof a&&"message"in a?String(a.message):null)||e.statusText||"Request failed with status ".concat(e.status));return a}let i={async get(e,t){let a=(0,r.gf)(),i={"Content-Type":"application/json"};a&&(i.Authorization="Bearer ".concat(a));let l="".concat(s).concat(e);if(t&&Object.keys(t).length>0){let e=Object.entries(t).filter(e=>{let[,t]=e;return null!=t}).map(e=>{let[t,a]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(a))}).join("&");e&&(l+="?".concat(e))}return n(await fetch(l,{method:"GET",headers:i}))},async post(e,t,a){let i=(0,r.gf)(),l={...(null==a?void 0:a.headers)||{}},c=t instanceof FormData;return c||l["Content-Type"]||(l["Content-Type"]="application/json"),i&&(l.Authorization="Bearer ".concat(i)),n(await fetch("".concat(s).concat(e),{method:"POST",headers:l,body:c?t:JSON.stringify(t)}))},async put(e,t,a){let i=(0,r.gf)(),l={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return i&&(l.Authorization="Bearer ".concat(i)),n(await fetch("".concat(s).concat(e),{method:"PUT",headers:l,body:JSON.stringify(t)}))},async patch(e,t,a){let i=(0,r.gf)(),l={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return i&&(l.Authorization="Bearer ".concat(i)),n(await fetch("".concat(s).concat(e),{method:"PATCH",headers:l,body:JSON.stringify(t)}))},async delete(e){let t=(0,r.gf)(),a={"Content-Type":"application/json"};return t&&(a.Authorization="Bearer ".concat(t)),n(await fetch("".concat(s).concat(e),{method:"DELETE",headers:a}))}}},2314:(e,t,a)=>{"use strict";a.d(t,{WG:()=>i,eF:()=>l,gf:()=>n});var r=a(6251);let s="token";function n(){var e;return null!==(e=r.A.get(s))&&void 0!==e?e:null}function i(e){r.A.set(s,e,{expires:30,sameSite:"lax"})}function l(){r.A.remove(s)}},2393:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(5928),s=a(6564);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},4269:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,AuthProvider:()=>o});var r=a(4568),s=a(7620),n=a(3311),i=a(6284),l=a(2314);let c=(0,s.createContext)({});function o(e){let{children:t}=e,a=(0,n.useRouter)(),[o,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[h,x]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,l.gf)();e?(m(e),i.u.get("/auth/me").then(e=>d(e)).catch(()=>{(0,l.eF)(),m(null)}).finally(()=>x(!1))):x(!1)},[]);let p=(0,s.useCallback)(async(e,t)=>{let r=await i.u.post("/auth/login",{email:e,password:t});(0,l.WG)(r.token),m(r.token),d(r.user),a.push("/")},[a]),f=(0,s.useCallback)(async e=>{let t=await i.u.post("/auth/register",e);(0,l.WG)(t.token),m(t.token),d(t.user),a.push("/")},[a]),y=(0,s.useCallback)(async()=>{try{await i.u.post("/auth/logout",{})}catch(e){}(0,l.eF)(),m(null),d(null),a.push("/login")},[a]);return(0,r.jsx)(c.Provider,{value:{user:o,token:u,isLoading:h,login:p,register:f,logout:y},children:t})}function d(){return(0,s.useContext)(c)}},6922:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(7620);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:a,strokeWidth:c?24*Number(l)/Number(s):l,className:n("lucide",o),...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:c,...o}=a;return(0,r.createElement)(l,{ref:i,iconNode:t,className:n("lucide-".concat(s(e)),c),...o})});return a.displayName="".concat(e),a}},6830:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(6922).A)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]])},4889:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(6922).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3391:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(6922).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},6271:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(6922).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3311:(e,t,a)=>{"use strict";var r=a(1383);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},6123:(e,t,a)=>{"use strict";a.d(t,{vv:()=>i,VZ:()=>l,X5:()=>s,O5:()=>n});var r=a(9772);let s=r.Ik({email:r.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:r.Yj().min(1,"Password is required")}),n=r.Ik({firstName:r.Yj().min(1,"First name is required").min(2,"First name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"First name can only contain letters"),lastName:r.Yj().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"Last name can only contain letters"),email:r.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:r.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Must contain at least one uppercase letter").regex(/[a-z]/,"Must contain at least one lowercase letter").regex(/[0-9]/,"Must contain at least one number").regex(/[^A-Za-z0-9]/,"Must contain at least one special character"),confirmPassword:r.Yj().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords must match",path:["confirmPassword"]});function i(e){return"$".concat(e.toFixed(2))}function l(e){return e%1==0?e.toString():e.toFixed(3).replace(/\.?0+$/,"")}}},e=>{var t=t=>e(e.s=t);e.O(0,[959,999,857,772,770,587,855,358],()=>t(5151)),_N_E=e.O()}]);