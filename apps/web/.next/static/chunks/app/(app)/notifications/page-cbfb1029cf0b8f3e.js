(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{1224:(t,e,s)=>{Promise.resolve().then(s.bind(s,8061))},8061:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>f});var i=s(4568);let r=(0,s(6922).A)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var n=s(5477),a=s(6892),o=s(5677),c=s(8367),l=s(9857),u=s(5595),h=s(6284),d=s(4458),p=s(3056),m=s(2393);function f(){let{notifications:t,unreadCount:e,isLoading:s,markAsRead:f,markAllAsRead:y,deleteNotification:v}=function(){let t=(0,c.jE)(),e=(0,l.I)({queryKey:["notifications"],queryFn:async()=>await h.u.get("/notifications")}),s=(0,u.n)({mutationFn:async t=>{await h.u.patch("/notifications/".concat(t),{isRead:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]})}}),i=(0,u.n)({mutationFn:async()=>{await h.u.patch("/notifications/read-all",{})},onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]})}}),r=(0,u.n)({mutationFn:async t=>{await h.u.delete("/notifications/".concat(t))},onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]})}}),n=e.data||[],a=n.filter(t=>!t.isRead).length;return{notifications:n,unreadCount:a,isLoading:e.isLoading,markAsRead:s,markAllAsRead:i,deleteNotification:r}}();return(0,i.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-text",children:"Notifications"}),e>0&&(0,i.jsxs)("p",{className:"text-sm text-text-secondary",children:[e," unread"]})]}),e>0&&(0,i.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>y.mutate(),children:[(0,i.jsx)(r,{className:"h-4 w-4 mr-2"})," Mark all read"]})]}),s?(0,i.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((t,e)=>(0,i.jsx)("div",{className:"h-16 rounded-xl bg-surface-variant animate-pulse"},e))}):0===t.length?(0,i.jsxs)(p.Zp,{className:"p-8 text-center",children:[(0,i.jsx)(n.A,{className:"h-12 w-12 mx-auto text-text-disabled mb-4"}),(0,i.jsx)("p",{className:"text-text-secondary",children:"No notifications"})]}):(0,i.jsx)("div",{className:"space-y-2",children:t.map(t=>(0,i.jsx)(p.Zp,{className:(0,m.cn)(!t.isRead&&"border-primary/30 bg-selection-bg"),children:(0,i.jsxs)(p.Wu,{className:"flex items-start justify-between p-4",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-text",children:t.title}),(0,i.jsx)("p",{className:"text-xs text-text-secondary mt-1",children:t.message}),(0,i.jsx)("p",{className:"text-xs text-text-disabled mt-1",children:new Date(t.createdAt).toLocaleString()})]}),(0,i.jsxs)("div",{className:"flex gap-1 ml-2",children:[!t.isRead&&(0,i.jsx)(d.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>f.mutate(t.id),children:(0,i.jsx)(a.A,{className:"h-3.5 w-3.5"})}),(0,i.jsx)(d.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-error",onClick:()=>v.mutate(t.id),children:(0,i.jsx)(o.A,{className:"h-3.5 w-3.5"})})]})]})},t.id))})]})}},4458:(t,e,s)=>{"use strict";s.d(e,{$:()=>l,r:()=>c});var i=s(4568),r=s(7620),n=s(7680),a=s(3686),o=s(2393);let c=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:pointer-events-none disabled:opacity-50 cursor-pointer",{variants:{variant:{default:"bg-primary text-white hover:bg-primary-variant shadow-sm",destructive:"bg-error text-white hover:bg-error/90 shadow-sm",outline:"border border-border bg-surface hover:bg-surface-variant text-text",secondary:"bg-surface-variant text-text hover:bg-surface-variant/80",ghost:"hover:bg-surface-variant text-text",link:"text-primary underline-offset-4 hover:underline",income:"bg-income text-white hover:bg-income-light shadow-sm",expense:"bg-expense text-white hover:bg-expense-light shadow-sm"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((t,e)=>{let{className:s,variant:r,size:a,asChild:l=!1,loading:u,children:h,disabled:d,...p}=t,m=l?n.DX:"button";return(0,i.jsxs)(m,{className:(0,o.cn)(c({variant:r,size:a,className:s})),ref:e,disabled:d||u,...p,children:[u&&(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),h]})});l.displayName="Button"},3056:(t,e,s)=>{"use strict";s.d(e,{BT:()=>l,Wu:()=>u,ZB:()=>c,Zp:()=>a,aR:()=>o});var i=s(4568),r=s(7620),n=s(2393);let a=r.forwardRef((t,e)=>{let{className:s,...r}=t;return(0,i.jsx)("div",{ref:e,className:(0,n.cn)("rounded-xl border border-border bg-surface shadow-sm",s),...r})});a.displayName="Card";let o=r.forwardRef((t,e)=>{let{className:s,...r}=t;return(0,i.jsx)("div",{ref:e,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});o.displayName="CardHeader";let c=r.forwardRef((t,e)=>{let{className:s,...r}=t;return(0,i.jsx)("div",{ref:e,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight text-text",s),...r})});c.displayName="CardTitle";let l=r.forwardRef((t,e)=>{let{className:s,...r}=t;return(0,i.jsx)("div",{ref:e,className:(0,n.cn)("text-sm text-text-secondary",s),...r})});l.displayName="CardDescription";let u=r.forwardRef((t,e)=>{let{className:s,...r}=t;return(0,i.jsx)("div",{ref:e,className:(0,n.cn)("p-6 pt-0",s),...r})});u.displayName="CardContent",r.forwardRef((t,e)=>{let{className:s,...r}=t;return(0,i.jsx)("div",{ref:e,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},6284:(t,e,s)=>{"use strict";s.d(e,{u:()=>a});var i=s(2314);let r="http://localhost:3000";async function n(t){if(204===t.status)return null;let e=await t.text(),s={};try{s=e?JSON.parse(e):{}}catch(s){if(!t.ok)throw Error(e||"Request failed with status ".concat(t.status));throw Error("Invalid JSON response: ".concat(e))}if(!t.ok)throw Error((s&&"object"==typeof s&&"message"in s?String(s.message):null)||t.statusText||"Request failed with status ".concat(t.status));return s}let a={async get(t,e){let s=(0,i.gf)(),a={"Content-Type":"application/json"};s&&(a.Authorization="Bearer ".concat(s));let o="".concat(r).concat(t);if(e&&Object.keys(e).length>0){let t=Object.entries(e).filter(t=>{let[,e]=t;return null!=e}).map(t=>{let[e,s]=t;return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(s))}).join("&");t&&(o+="?".concat(t))}return n(await fetch(o,{method:"GET",headers:a}))},async post(t,e,s){let a=(0,i.gf)(),o={...(null==s?void 0:s.headers)||{}},c=e instanceof FormData;return c||o["Content-Type"]||(o["Content-Type"]="application/json"),a&&(o.Authorization="Bearer ".concat(a)),n(await fetch("".concat(r).concat(t),{method:"POST",headers:o,body:c?e:JSON.stringify(e)}))},async put(t,e,s){let a=(0,i.gf)(),o={"Content-Type":"application/json",...(null==s?void 0:s.headers)||{}};return a&&(o.Authorization="Bearer ".concat(a)),n(await fetch("".concat(r).concat(t),{method:"PUT",headers:o,body:JSON.stringify(e)}))},async patch(t,e,s){let a=(0,i.gf)(),o={"Content-Type":"application/json",...(null==s?void 0:s.headers)||{}};return a&&(o.Authorization="Bearer ".concat(a)),n(await fetch("".concat(r).concat(t),{method:"PATCH",headers:o,body:JSON.stringify(e)}))},async delete(t){let e=(0,i.gf)(),s={"Content-Type":"application/json"};return e&&(s.Authorization="Bearer ".concat(e)),n(await fetch("".concat(r).concat(t),{method:"DELETE",headers:s}))}}},2314:(t,e,s)=>{"use strict";s.d(e,{WG:()=>a,eF:()=>o,gf:()=>n});var i=s(6251);let r="token";function n(){var t;return null!==(t=i.A.get(r))&&void 0!==t?t:null}function a(t){i.A.set(r,t,{expires:30,sameSite:"lax"})}function o(){i.A.remove(r)}},2393:(t,e,s)=>{"use strict";s.d(e,{cn:()=>n});var i=s(5928),r=s(6564);function n(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];return(0,r.QP)((0,i.$)(e))}},6922:(t,e,s)=>{"use strict";s.d(e,{A:()=>c});var i=s(7620);let r=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];return e.filter((t,e,s)=>!!t&&""!==t.trim()&&s.indexOf(t)===e).join(" ").trim()};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,i.forwardRef)((t,e)=>{let{color:s="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:l="",children:u,iconNode:h,...d}=t;return(0,i.createElement)("svg",{ref:e,...a,width:r,height:r,stroke:s,strokeWidth:c?24*Number(o)/Number(r):o,className:n("lucide",l),...d},[...h.map(t=>{let[e,s]=t;return(0,i.createElement)(e,s)}),...Array.isArray(u)?u:[u]])}),c=(t,e)=>{let s=(0,i.forwardRef)((s,a)=>{let{className:c,...l}=s;return(0,i.createElement)(o,{ref:a,iconNode:e,className:n("lucide-".concat(r(t)),c),...l})});return s.displayName="".concat(t),s}},5477:(t,e,s)=>{"use strict";s.d(e,{A:()=>i});let i=(0,s(6922).A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},6892:(t,e,s)=>{"use strict";s.d(e,{A:()=>i});let i=(0,s(6922).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5677:(t,e,s)=>{"use strict";s.d(e,{A:()=>i});let i=(0,s(6922).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6329:(t,e,s)=>{"use strict";s.d(e,{s:()=>a,t:()=>n});var i=s(7620);function r(t,e){if("function"==typeof t)return t(e);null!=t&&(t.current=e)}function n(...t){return e=>{let s=!1,i=t.map(t=>{let i=r(t,e);return s||"function"!=typeof i||(s=!0),i});if(s)return()=>{for(let e=0;e<i.length;e++){let s=i[e];"function"==typeof s?s():r(t[e],null)}}}}function a(...t){return i.useCallback(n(...t),t)}},7680:(t,e,s)=>{"use strict";s.d(e,{DX:()=>h,TL:()=>u});var i,r=s(7620),n=s(6329),a=s(4568),o=Symbol.for("react.lazy"),c=(i||(i=s.t(r,2)))[" use ".trim().toString()];function l(t){var e;return null!=t&&"object"==typeof t&&"$$typeof"in t&&t.$$typeof===o&&"_payload"in t&&"object"==typeof(e=t._payload)&&null!==e&&"then"in e}function u(t){let e=function(t){let e=r.forwardRef((t,e)=>{let{children:s,...i}=t;if(l(s)&&"function"==typeof c&&(s=c(s._payload)),r.isValidElement(s)){var a;let t,o;let c=(a=s,(t=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning?a.ref:(t=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning?a.props.ref:a.props.ref||a.ref),l=function(t,e){let s={...e};for(let i in e){let r=t[i],n=e[i];/^on[A-Z]/.test(i)?r&&n?s[i]=(...t)=>{let e=n(...t);return r(...t),e}:r&&(s[i]=r):"style"===i?s[i]={...r,...n}:"className"===i&&(s[i]=[r,n].filter(Boolean).join(" "))}return{...t,...s}}(i,s.props);return s.type!==r.Fragment&&(l.ref=e?(0,n.t)(e,c):c),r.cloneElement(s,l)}return r.Children.count(s)>1?r.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}(t),s=r.forwardRef((t,s)=>{let{children:i,...n}=t;l(i)&&"function"==typeof c&&(i=c(i._payload));let o=r.Children.toArray(i),u=o.find(p);if(u){let t=u.props.children,i=o.map(e=>e!==u?e:r.Children.count(t)>1?r.Children.only(null):r.isValidElement(t)?t.props.children:null);return(0,a.jsx)(e,{...n,ref:s,children:r.isValidElement(t)?r.cloneElement(t,void 0,i):null})}return(0,a.jsx)(e,{...n,ref:s,children:i})});return s.displayName=`${t}.Slot`,s}var h=u("Slot"),d=Symbol("radix.slottable");function p(t){return r.isValidElement(t)&&"function"==typeof t.type&&"__radixId"in t.type&&t.type.__radixId===d}},1140:(t,e,s)=>{"use strict";s.d(e,{$:()=>o,s:()=>a});var i=s(3321),r=s(136),n=s(2820),a=class extends r.k{#t;#e;#s;#i;constructor(t){super(),this.#t=t.client,this.mutationId=t.mutationId,this.#s=t.mutationCache,this.#e=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#s.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(t){let e=()=>{this.#r({type:"continue"})},s={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=(0,n.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#r({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});let i="pending"===this.state.status,r=!this.#i.canStart();try{if(i)e();else{this.#r({type:"pending",variables:t,isPaused:r}),this.#s.config.onMutate&&await this.#s.config.onMutate(t,this,s);let e=await this.options.onMutate?.(t,s);e!==this.state.context&&this.#r({type:"pending",context:e,variables:t,isPaused:r})}let n=await this.#i.start();return await this.#s.config.onSuccess?.(n,t,this.state.context,this,s),await this.options.onSuccess?.(n,t,this.state.context,s),await this.#s.config.onSettled?.(n,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(n,null,t,this.state.context,s),this.#r({type:"success",data:n}),n}catch(e){try{await this.#s.config.onError?.(e,t,this.state.context,this,s)}catch(t){Promise.reject(t)}try{await this.options.onError?.(e,t,this.state.context,s)}catch(t){Promise.reject(t)}try{await this.#s.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this,s)}catch(t){Promise.reject(t)}try{await this.options.onSettled?.(void 0,e,t,this.state.context,s)}catch(t){Promise.reject(t)}throw this.#r({type:"error",error:e}),e}finally{this.#s.runNext(this)}}#r(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),i.jG.batch(()=>{this.#e.forEach(e=>{e.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},5595:(t,e,s)=>{"use strict";s.d(e,{n:()=>u});var i=s(7620),r=s(1140),n=s(3321),a=s(4034),o=s(9051),c=class extends a.Q{#t;#n=void 0;#a;#o;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#c()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#a,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.EN)(e.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():this.#a?.state.status==="pending"&&this.#a.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#a?.removeObserver(this)}onMutationUpdate(t){this.#c(),this.#l(t)}getCurrentResult(){return this.#n}reset(){this.#a?.removeObserver(this),this.#a=void 0,this.#c(),this.#l()}mutate(t,e){return this.#o=e,this.#a?.removeObserver(this),this.#a=this.#t.getMutationCache().build(this.#t,this.options),this.#a.addObserver(this),this.#a.execute(t)}#c(){let t=this.#a?.state??(0,r.$)();this.#n={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#l(t){n.jG.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#n.variables,s=this.#n.context,i={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#o.onSuccess?.(t.data,e,s,i)}catch(t){Promise.reject(t)}try{this.#o.onSettled?.(t.data,null,e,s,i)}catch(t){Promise.reject(t)}}else if(t?.type==="error"){try{this.#o.onError?.(t.error,e,s,i)}catch(t){Promise.reject(t)}try{this.#o.onSettled?.(void 0,t.error,e,s,i)}catch(t){Promise.reject(t)}}}this.listeners.forEach(t=>{t(this.#n)})})}},l=s(8367);function u(t,e){let s=(0,l.jE)(e),[r]=i.useState(()=>new c(s,t));i.useEffect(()=>{r.setOptions(t)},[r,t]);let a=i.useSyncExternalStore(i.useCallback(t=>r.subscribe(n.jG.batchCalls(t)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),u=i.useCallback((t,e)=>{r.mutate(t,e).catch(o.lQ)},[r]);if(a.error&&(0,o.GU)(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:u,mutateAsync:a.mutate}}},3686:(t,e,s)=>{"use strict";s.d(e,{F:()=>a});var i=s(5928);let r=t=>"boolean"==typeof t?`${t}`:0===t?"0":t,n=i.$,a=(t,e)=>s=>{var i;if((null==e?void 0:e.variants)==null)return n(t,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:a,defaultVariants:o}=e,c=Object.keys(a).map(t=>{let e=null==s?void 0:s[t],i=null==o?void 0:o[t];if(null===e)return null;let n=r(e)||r(i);return a[t][n]}),l=s&&Object.entries(s).reduce((t,e)=>{let[s,i]=e;return void 0===i||(t[s]=i),t},{});return n(t,c,null==e?void 0:null===(i=e.compoundVariants)||void 0===i?void 0:i.reduce((t,e)=>{let{class:s,className:i,...r}=e;return Object.entries(r).every(t=>{let[e,s]=t;return Array.isArray(s)?s.includes({...o,...l}[e]):({...o,...l})[e]===s})?[...t,s,i]:t},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}},t=>{var e=e=>t(t.s=e);t.O(0,[959,999,857,587,855,358],()=>e(1224)),_N_E=t.O()}]);