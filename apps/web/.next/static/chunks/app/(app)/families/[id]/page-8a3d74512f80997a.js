(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{5826:(e,s,t)=>{Promise.resolve().then(t.bind(t,4677))},4677:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(4568),l=t(7620),n=t(3311),r=t(3905);let i=(0,t(6922).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var c=t(5677),u=t(7987),d=t(4475),x=t(6123),h=t(4269),m=t(4458),o=t(6826),y=t(3056),v=t(2115),j=t(8702);function p(e){let{params:s}=e,{id:t}=(0,l.use)(s),p=(0,n.useRouter)(),{user:f}=(0,h.A)(),{data:k,isLoading:N}=(0,d.n)(t),{inviteMember:b,removeMember:g,leaveFamily:w}=(0,d.c)(),[C,A]=(0,l.useState)(!1),[E,I]=(0,l.useState)("");if(N)return(0,a.jsx)("div",{className:"max-w-2xl mx-auto h-64 rounded-xl bg-surface-variant animate-pulse"});if(!k)return(0,a.jsx)("div",{className:"text-center py-12 text-text-secondary",children:"Family not found"});let M={OWNER:"text-[var(--role-owner)]",ADMIN:"text-[var(--role-admin)]",MEMBER:"text-[var(--role-member)]"};return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,a.jsxs)(m.$,{variant:"ghost",onClick:()=>p.back(),children:[(0,a.jsx)(r.A,{className:"h-4 w-4 mr-2"})," Back"]}),(0,a.jsxs)(y.Zp,{children:[(0,a.jsxs)(y.aR,{children:[(0,a.jsx)(y.ZB,{children:k.name}),(0,a.jsxs)("p",{className:"text-sm text-text-secondary",children:["Balance: ",(0,x.vv)(k.balance)]})]}),(0,a.jsxs)(y.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"font-medium text-text",children:["Members (",k.members.length,")"]}),(0,a.jsxs)(m.$,{size:"sm",onClick:()=>A(!0),children:[(0,a.jsx)(i,{className:"h-4 w-4 mr-2"})," Invite"]})]}),(0,a.jsx)("div",{className:"space-y-2",children:k.members.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-surface-variant",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-text",children:[e.user.firstName," ",e.user.lastName]}),(0,a.jsx)("p",{className:"text-xs text-text-secondary",children:e.user.email})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.E,{variant:"outline",className:M[e.role],children:e.role}),e.userId!==(null==f?void 0:f.id)&&(0,a.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-error",onClick:()=>g.mutate({familyId:t,userId:e.userId}),children:(0,a.jsx)(c.A,{className:"h-3.5 w-3.5"})})]})]},e.id))}),(0,a.jsxs)(m.$,{variant:"outline",className:"w-full text-error",onClick:()=>{w.mutate(t),p.push("/families")},children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"})," Leave Family"]})]})]}),(0,a.jsx)(j.lG,{open:C,onOpenChange:A,children:(0,a.jsxs)(j.Cf,{children:[(0,a.jsx)(j.c7,{children:(0,a.jsx)(j.L3,{children:"Invite Member"})}),(0,a.jsx)(o.p,{placeholder:"Email address",value:E,onChange:e=>I(e.target.value)}),(0,a.jsxs)(j.Es,{children:[(0,a.jsx)(m.$,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),(0,a.jsx)(m.$,{onClick:async()=>{await b.mutateAsync({familyId:t,email:E}),I(""),A(!1)},loading:b.isPending,children:"Send Invite"})]})]})})]})}},4269:(e,s,t)=>{"use strict";t.d(s,{A:()=>d,AuthProvider:()=>u});var a=t(4568),l=t(7620),n=t(3311),r=t(6284),i=t(2314);let c=(0,l.createContext)({});function u(e){let{children:s}=e,t=(0,n.useRouter)(),[u,d]=(0,l.useState)(null),[x,h]=(0,l.useState)(null),[m,o]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=(0,i.gf)();e?(h(e),r.u.get("/auth/me").then(e=>d(e)).catch(()=>{(0,i.eF)(),h(null)}).finally(()=>o(!1))):o(!1)},[]);let y=(0,l.useCallback)(async(e,s)=>{let a=await r.u.post("/auth/login",{email:e,password:s});(0,i.WG)(a.token),h(a.token),d(a.user),t.push("/")},[t]),v=(0,l.useCallback)(async e=>{let s=await r.u.post("/auth/register",e);(0,i.WG)(s.token),h(s.token),d(s.user),t.push("/")},[t]),j=(0,l.useCallback)(async()=>{try{await r.u.post("/auth/logout",{})}catch(e){}(0,i.eF)(),h(null),d(null),t.push("/login")},[t]);return(0,a.jsx)(c.Provider,{value:{user:u,token:x,isLoading:m,login:y,register:v,logout:j},children:s})}function d(){return(0,l.useContext)(c)}},3905:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(6922).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7987:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(6922).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3312:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(6922).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[959,999,857,772,961,70,739,231,587,855,358],()=>s(5826)),_N_E=e.O()}]);