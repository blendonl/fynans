(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[644],{3864:(e,t,a)=>{Promise.resolve().then(a.bind(a,3131))},3131:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(4568),n=a(5770),i=a.n(n),r=a(9880),c=a(5628),o=a(4475),l=a(6123),d=a(4458),m=a(3056),u=a(2115);function f(){let{families:e,pendingInvitations:t,isLoading:a,acceptInvitation:n,declineInvitation:f}=(0,o.c)();return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-text",children:"Families"}),(0,s.jsx)(i(),{href:"/families/create",children:(0,s.jsxs)(d.$,{children:[(0,s.jsx)(r.A,{className:"h-4 w-4 mr-2"})," Create Family"]})})]}),t.length>0&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-text",children:"Pending Invitations"}),t.map(e=>(0,s.jsx)(m.Zp,{children:(0,s.jsxs)(m.Wu,{className:"flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-text",children:"Family invitation"}),(0,s.jsxs)("p",{className:"text-xs text-text-secondary",children:["From: ",e.inviteeEmail]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.$,{size:"sm",onClick:()=>n.mutate(e.id),children:"Accept"}),(0,s.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>f.mutate(e.id),children:"Decline"})]})]})},e.id))]}),a?(0,s.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"h-20 rounded-xl bg-surface-variant animate-pulse"},t))}):0===e.length?(0,s.jsxs)(m.Zp,{className:"p-8 text-center",children:[(0,s.jsx)(c.A,{className:"h-12 w-12 mx-auto text-text-disabled mb-4"}),(0,s.jsx)("p",{className:"text-text-secondary",children:"No families yet"})]}):(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsx)(i(),{href:"/families/".concat(e.id),children:(0,s.jsx)(m.Zp,{className:"hover:shadow-md transition-shadow cursor-pointer",children:(0,s.jsxs)(m.Wu,{className:"flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-[var(--family-group)]/10 flex items-center justify-center",children:(0,s.jsx)(c.A,{className:"h-5 w-5 text-[var(--family-group)]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-text",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-text-secondary",children:["Balance: ",(0,l.vv)(e.balance)]})]})]}),(0,s.jsx)(u.E,{variant:"secondary",children:"View"})]})})},e.id))})]})}},2115:(e,t,a)=>{"use strict";a.d(t,{E:()=>c});var s=a(4568);a(7620);var n=a(3686),i=a(2393);let r=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"border-transparent bg-primary text-white",secondary:"border-transparent bg-surface-variant text-text-secondary",destructive:"border-transparent bg-error text-white",outline:"text-text border-border",income:"border-transparent bg-income/10 text-income",expense:"border-transparent bg-expense/10 text-expense"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:a,...n}=e;return(0,s.jsx)("div",{className:(0,i.cn)(r({variant:a}),t),...n})}},4458:(e,t,a)=>{"use strict";a.d(t,{$:()=>l,r:()=>o});var s=a(4568),n=a(7620),i=a(7680),r=a(3686),c=a(2393);let o=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:pointer-events-none disabled:opacity-50 cursor-pointer",{variants:{variant:{default:"bg-primary text-white hover:bg-primary-variant shadow-sm",destructive:"bg-error text-white hover:bg-error/90 shadow-sm",outline:"border border-border bg-surface hover:bg-surface-variant text-text",secondary:"bg-surface-variant text-text hover:bg-surface-variant/80",ghost:"hover:bg-surface-variant text-text",link:"text-primary underline-offset-4 hover:underline",income:"bg-income text-white hover:bg-income-light shadow-sm",expense:"bg-expense text-white hover:bg-expense-light shadow-sm"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:a,variant:n,size:r,asChild:l=!1,loading:d,children:m,disabled:u,...f}=e,x=l?i.DX:"button";return(0,s.jsxs)(x,{className:(0,c.cn)(o({variant:n,size:r,className:a})),ref:t,disabled:u||d,...f,children:[d&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),m]})});l.displayName="Button"},3056:(e,t,a)=>{"use strict";a.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>o,Zp:()=>r,aR:()=>c});var s=a(4568),n=a(7620),i=a(2393);let r=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-xl border border-border bg-surface shadow-sm",a),...n})});r.displayName="Card";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...n})});c.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight text-text",a),...n})});o.displayName="CardTitle";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-text-secondary",a),...n})});l.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},4475:(e,t,a)=>{"use strict";a.d(t,{c:()=>c,n:()=>o});var s=a(8367),n=a(9857),i=a(5595),r=a(6284);function c(){let e=(0,s.jE)(),t=(0,n.I)({queryKey:["families"],queryFn:async()=>await r.u.get("/families")}),a=(0,n.I)({queryKey:["family-invitations-pending"],queryFn:async()=>await r.u.get("/families/invitations/pending")}),c=(0,i.n)({mutationFn:async e=>await r.u.post("/families",{name:e}),onSuccess:()=>{e.invalidateQueries({queryKey:["families"]})}}),o=(0,i.n)({mutationFn:async e=>{let{familyId:t,email:a}=e;await r.u.post("/families/".concat(t,"/invitations"),{inviteeEmail:a})}}),l=(0,i.n)({mutationFn:async e=>{let{familyId:t,userId:a}=e;await r.u.delete("/families/".concat(t,"/members/").concat(a))},onSuccess:()=>{e.invalidateQueries({queryKey:["families"]})}}),d=(0,i.n)({mutationFn:async e=>{await r.u.delete("/families/".concat(e,"/members/me"))},onSuccess:()=>{e.invalidateQueries({queryKey:["families"]})}}),m=(0,i.n)({mutationFn:async e=>{await r.u.post("/families/invitations/".concat(e,"/accept"),{})},onSuccess:()=>{e.invalidateQueries({queryKey:["families"]}),e.invalidateQueries({queryKey:["family-invitations-pending"]})}}),u=(0,i.n)({mutationFn:async e=>{await r.u.post("/families/invitations/".concat(e,"/decline"),{})},onSuccess:()=>{e.invalidateQueries({queryKey:["family-invitations-pending"]})}});return{families:t.data||[],pendingInvitations:a.data||[],isLoading:t.isLoading,createFamily:c,inviteMember:o,removeMember:l,leaveFamily:d,acceptInvitation:m,declineInvitation:u}}function o(e){return(0,n.I)({queryKey:["family",e],queryFn:async()=>await r.u.get("/families/".concat(e)),enabled:!!e})}},6284:(e,t,a)=>{"use strict";a.d(t,{u:()=>r});var s=a(2314);let n="http://localhost:3000";async function i(e){if(204===e.status)return null;let t=await e.text(),a={};try{a=t?JSON.parse(t):{}}catch(a){if(!e.ok)throw Error(t||"Request failed with status ".concat(e.status));throw Error("Invalid JSON response: ".concat(t))}if(!e.ok)throw Error((a&&"object"==typeof a&&"message"in a?String(a.message):null)||e.statusText||"Request failed with status ".concat(e.status));return a}let r={async get(e,t){let a=(0,s.gf)(),r={"Content-Type":"application/json"};a&&(r.Authorization="Bearer ".concat(a));let c="".concat(n).concat(e);if(t&&Object.keys(t).length>0){let e=Object.entries(t).filter(e=>{let[,t]=e;return null!=t}).map(e=>{let[t,a]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(a))}).join("&");e&&(c+="?".concat(e))}return i(await fetch(c,{method:"GET",headers:r}))},async post(e,t,a){let r=(0,s.gf)(),c={...(null==a?void 0:a.headers)||{}},o=t instanceof FormData;return o||c["Content-Type"]||(c["Content-Type"]="application/json"),r&&(c.Authorization="Bearer ".concat(r)),i(await fetch("".concat(n).concat(e),{method:"POST",headers:c,body:o?t:JSON.stringify(t)}))},async put(e,t,a){let r=(0,s.gf)(),c={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return r&&(c.Authorization="Bearer ".concat(r)),i(await fetch("".concat(n).concat(e),{method:"PUT",headers:c,body:JSON.stringify(t)}))},async patch(e,t,a){let r=(0,s.gf)(),c={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return r&&(c.Authorization="Bearer ".concat(r)),i(await fetch("".concat(n).concat(e),{method:"PATCH",headers:c,body:JSON.stringify(t)}))},async delete(e){let t=(0,s.gf)(),a={"Content-Type":"application/json"};return t&&(a.Authorization="Bearer ".concat(t)),i(await fetch("".concat(n).concat(e),{method:"DELETE",headers:a}))}}},2314:(e,t,a)=>{"use strict";a.d(t,{WG:()=>r,eF:()=>c,gf:()=>i});var s=a(6251);let n="token";function i(){var e;return null!==(e=s.A.get(n))&&void 0!==e?e:null}function r(e){s.A.set(n,e,{expires:30,sameSite:"lax"})}function c(){s.A.remove(n)}},2393:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var s=a(5928),n=a(6564);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,s.$)(t))}},6123:(e,t,a)=>{"use strict";a.d(t,{vv:()=>r,VZ:()=>c,X5:()=>n,O5:()=>i});var s=a(9772);let n=s.Ik({email:s.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:s.Yj().min(1,"Password is required")}),i=s.Ik({firstName:s.Yj().min(1,"First name is required").min(2,"First name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"First name can only contain letters"),lastName:s.Yj().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"Last name can only contain letters"),email:s.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:s.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Must contain at least one uppercase letter").regex(/[a-z]/,"Must contain at least one lowercase letter").regex(/[0-9]/,"Must contain at least one number").regex(/[^A-Za-z0-9]/,"Must contain at least one special character"),confirmPassword:s.Yj().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords must match",path:["confirmPassword"]});function r(e){return"$".concat(e.toFixed(2))}function c(e){return e%1==0?e.toString():e.toFixed(3).replace(/\.?0+$/,"")}}},e=>{var t=t=>e(e.s=t);e.O(0,[959,999,857,772,770,725,587,855,358],()=>t(3864)),_N_E=e.O()}]);