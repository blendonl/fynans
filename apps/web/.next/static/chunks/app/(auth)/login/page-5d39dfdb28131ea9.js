(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{8934:(e,t,a)=>{Promise.resolve().then(a.bind(a,8540))},8540:(e,t,a)=>{"use strict";a.d(t,{LoginForm:()=>h});var r=a(4568),s=a(7620),n=a(5770),i=a.n(n),o=a(1069),l=a(6422),c=a(6123),d=a(4269),u=a(4458),m=a(6826),p=a(5392),f=a(3056);function h(){let{login:e}=(0,d.A)(),[t,a]=(0,s.useState)(""),{register:n,handleSubmit:h,formState:{errors:x,isSubmitting:g}}=(0,o.mN)({resolver:(0,l.u)(c.X5)}),y=async t=>{a("");try{await e(t.email,t.password)}catch(e){a(e instanceof Error?e.message:"Login failed")}};return(0,r.jsxs)(f.Zp,{className:"border-none shadow-2xl",children:[(0,r.jsxs)(f.aR,{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 h-12 w-12 rounded-xl bg-gradient-to-br from-[var(--gradient-primary-start)] to-[var(--gradient-primary-end)] flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:"M"})}),(0,r.jsx)(f.ZB,{className:"text-2xl",children:"Welcome back"}),(0,r.jsx)(f.BT,{children:"Sign in to your account"})]}),(0,r.jsx)(f.Wu,{children:(0,r.jsxs)("form",{onSubmit:h(y),className:"space-y-4",children:[t&&(0,r.jsx)("div",{className:"rounded-lg bg-error/10 p-3 text-sm text-error",children:t}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p.J,{htmlFor:"email",children:"Email"}),(0,r.jsx)(m.p,{id:"email",type:"email",placeholder:"you@example.com",...n("email")}),x.email&&(0,r.jsx)("p",{className:"text-sm text-error",children:x.email.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p.J,{htmlFor:"password",children:"Password"}),(0,r.jsx)(m.p,{id:"password",type:"password",placeholder:"Enter your password",...n("password")}),x.password&&(0,r.jsx)("p",{className:"text-sm text-error",children:x.password.message})]}),(0,r.jsx)(u.$,{type:"submit",className:"w-full",loading:g,children:"Sign In"}),(0,r.jsxs)("p",{className:"text-center text-sm text-text-secondary",children:["Don't have an account?"," ",(0,r.jsx)(i(),{href:"/register",className:"text-primary hover:underline font-medium",children:"Sign up"})]})]})})]})}},4458:(e,t,a)=>{"use strict";a.d(t,{$:()=>c,r:()=>l});var r=a(4568),s=a(7620),n=a(7680),i=a(3686),o=a(2393);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary disabled:pointer-events-none disabled:opacity-50 cursor-pointer",{variants:{variant:{default:"bg-primary text-white hover:bg-primary-variant shadow-sm",destructive:"bg-error text-white hover:bg-error/90 shadow-sm",outline:"border border-border bg-surface hover:bg-surface-variant text-text",secondary:"bg-surface-variant text-text hover:bg-surface-variant/80",ghost:"hover:bg-surface-variant text-text",link:"text-primary underline-offset-4 hover:underline",income:"bg-income text-white hover:bg-income-light shadow-sm",expense:"bg-expense text-white hover:bg-expense-light shadow-sm"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:c=!1,loading:d,children:u,disabled:m,...p}=e,f=c?n.DX:"button";return(0,r.jsxs)(f,{className:(0,o.cn)(l({variant:s,size:i,className:a})),ref:t,disabled:m||d,...p,children:[d&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),u]})});c.displayName="Button"},3056:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>o});var r=a(4568),s=a(7620),n=a(2393);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border border-border bg-surface shadow-sm",a),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight text-text",a),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-text-secondary",a),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},6826:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var r=a(4568),s=a(7620),n=a(2393);let i=s.forwardRef((e,t)=>{let{className:a,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text placeholder:text-text-disabled focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50 transition-colors",a),ref:t,...i})});i.displayName="Input"},5392:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});var r=a(4568),s=a(7620),n=a(8157),i=a(2393);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,i.cn)("text-sm font-medium text-text leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...s})});o.displayName=n.b.displayName},6284:(e,t,a)=>{"use strict";a.d(t,{u:()=>i});var r=a(2314);let s="http://localhost:3000";async function n(e){if(204===e.status)return null;let t=await e.text(),a={};try{a=t?JSON.parse(t):{}}catch(a){if(!e.ok)throw Error(t||"Request failed with status ".concat(e.status));throw Error("Invalid JSON response: ".concat(t))}if(!e.ok)throw Error((a&&"object"==typeof a&&"message"in a?String(a.message):null)||e.statusText||"Request failed with status ".concat(e.status));return a}let i={async get(e,t){let a=(0,r.gf)(),i={"Content-Type":"application/json"};a&&(i.Authorization="Bearer ".concat(a));let o="".concat(s).concat(e);if(t&&Object.keys(t).length>0){let e=Object.entries(t).filter(e=>{let[,t]=e;return null!=t}).map(e=>{let[t,a]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(a))}).join("&");e&&(o+="?".concat(e))}return n(await fetch(o,{method:"GET",headers:i}))},async post(e,t,a){let i=(0,r.gf)(),o={...(null==a?void 0:a.headers)||{}},l=t instanceof FormData;return l||o["Content-Type"]||(o["Content-Type"]="application/json"),i&&(o.Authorization="Bearer ".concat(i)),n(await fetch("".concat(s).concat(e),{method:"POST",headers:o,body:l?t:JSON.stringify(t)}))},async put(e,t,a){let i=(0,r.gf)(),o={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return i&&(o.Authorization="Bearer ".concat(i)),n(await fetch("".concat(s).concat(e),{method:"PUT",headers:o,body:JSON.stringify(t)}))},async patch(e,t,a){let i=(0,r.gf)(),o={"Content-Type":"application/json",...(null==a?void 0:a.headers)||{}};return i&&(o.Authorization="Bearer ".concat(i)),n(await fetch("".concat(s).concat(e),{method:"PATCH",headers:o,body:JSON.stringify(t)}))},async delete(e){let t=(0,r.gf)(),a={"Content-Type":"application/json"};return t&&(a.Authorization="Bearer ".concat(t)),n(await fetch("".concat(s).concat(e),{method:"DELETE",headers:a}))}}},2314:(e,t,a)=>{"use strict";a.d(t,{WG:()=>i,eF:()=>o,gf:()=>n});var r=a(6251);let s="token";function n(){var e;return null!==(e=r.A.get(s))&&void 0!==e?e:null}function i(e){r.A.set(s,e,{expires:30,sameSite:"lax"})}function o(){r.A.remove(s)}},2393:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(5928),s=a(6564);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},4269:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,AuthProvider:()=>c});var r=a(4568),s=a(7620),n=a(3311),i=a(6284),o=a(2314);let l=(0,s.createContext)({});function c(e){let{children:t}=e,a=(0,n.useRouter)(),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[p,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,o.gf)();e?(m(e),i.u.get("/auth/me").then(e=>d(e)).catch(()=>{(0,o.eF)(),m(null)}).finally(()=>f(!1))):f(!1)},[]);let h=(0,s.useCallback)(async(e,t)=>{let r=await i.u.post("/auth/login",{email:e,password:t});(0,o.WG)(r.token),m(r.token),d(r.user),a.push("/")},[a]),x=(0,s.useCallback)(async e=>{let t=await i.u.post("/auth/register",e);(0,o.WG)(t.token),m(t.token),d(t.user),a.push("/")},[a]),g=(0,s.useCallback)(async()=>{try{await i.u.post("/auth/logout",{})}catch(e){}(0,o.eF)(),m(null),d(null),a.push("/login")},[a]);return(0,r.jsx)(l.Provider,{value:{user:c,token:u,isLoading:p,login:h,register:x,logout:g},children:t})}function d(){return(0,s.useContext)(l)}},6123:(e,t,a)=>{"use strict";a.d(t,{vv:()=>i,VZ:()=>o,X5:()=>s,O5:()=>n});var r=a(9772);let s=r.Ik({email:r.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:r.Yj().min(1,"Password is required")}),n=r.Ik({firstName:r.Yj().min(1,"First name is required").min(2,"First name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"First name can only contain letters"),lastName:r.Yj().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"Last name can only contain letters"),email:r.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:r.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Must contain at least one uppercase letter").regex(/[a-z]/,"Must contain at least one lowercase letter").regex(/[0-9]/,"Must contain at least one number").regex(/[^A-Za-z0-9]/,"Must contain at least one special character"),confirmPassword:r.Yj().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords must match",path:["confirmPassword"]});function i(e){return"$".concat(e.toFixed(2))}function o(e){return e%1==0?e.toString():e.toFixed(3).replace(/\.?0+$/,"")}}},e=>{var t=t=>e(e.s=t);e.O(0,[959,772,770,188,587,855,358],()=>t(8934)),_N_E=e.O()}]);