(()=>{var e={};e.id=910,e.ids=[910],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9261:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=a(735),r=a(1232),n=a(2914),i=a.n(n),o=a(85),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let d=["",{children:["(app)",{children:["families",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3363)),"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/families/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3069)),"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,8270,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,5335,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,4908,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1052)),"/mnt/data/personal/mmoneymanager/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,8270,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,5335,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,4908,23)),"next/dist/client/components/unauthorized-error"]}],c=["/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/families/[id]/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/(app)/families/[id]/page",pathname:"/families/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1038:(e,t,a)=>{Promise.resolve().then(a.bind(a,3363))},9494:(e,t,a)=>{Promise.resolve().then(a.bind(a,1570))},1570:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(2725),r=a(1616),n=a(207),i=a(1129);let o=(0,a(684).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var l=a(87),d=a(7814),c=a(9493),m=a(6331),u=a(8215),p=a(7466),x=a(9912),f=a(6476),y=a(6633),h=a(2478);function v({params:e}){let{id:t}=(0,r.use)(e),a=(0,n.useRouter)(),{user:v}=(0,u.A)(),{data:b,isLoading:g}=(0,c.n)(t),{inviteMember:j,removeMember:w,leaveFamily:N}=(0,c.c)(),[k,P]=(0,r.useState)(!1),[q,A]=(0,r.useState)("");if(g)return(0,s.jsx)("div",{className:"max-w-2xl mx-auto h-64 rounded-xl bg-surface-variant animate-pulse"});if(!b)return(0,s.jsx)("div",{className:"text-center py-12 text-text-secondary",children:"Family not found"});let C={OWNER:"text-[var(--role-owner)]",ADMIN:"text-[var(--role-admin)]",MEMBER:"text-[var(--role-member)]"};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,s.jsxs)(p.$,{variant:"ghost",onClick:()=>a.back(),children:[(0,s.jsx)(i.A,{className:"h-4 w-4 mr-2"})," Back"]}),(0,s.jsxs)(f.Zp,{children:[(0,s.jsxs)(f.aR,{children:[(0,s.jsx)(f.ZB,{children:b.name}),(0,s.jsxs)("p",{className:"text-sm text-text-secondary",children:["Balance: ",(0,m.vv)(b.balance)]})]}),(0,s.jsxs)(f.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"font-medium text-text",children:["Members (",b.members.length,")"]}),(0,s.jsxs)(p.$,{size:"sm",onClick:()=>P(!0),children:[(0,s.jsx)(o,{className:"h-4 w-4 mr-2"})," Invite"]})]}),(0,s.jsx)("div",{className:"space-y-2",children:b.members.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-surface-variant",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-text",children:[e.user.firstName," ",e.user.lastName]}),(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:e.user.email})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(y.E,{variant:"outline",className:C[e.role],children:e.role}),e.userId!==v?.id&&(0,s.jsx)(p.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-error",onClick:()=>w.mutate({familyId:t,userId:e.userId}),children:(0,s.jsx)(l.A,{className:"h-3.5 w-3.5"})})]})]},e.id))}),(0,s.jsxs)(p.$,{variant:"outline",className:"w-full text-error",onClick:()=>{N.mutate(t),a.push("/families")},children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-2"})," Leave Family"]})]})]}),(0,s.jsx)(h.lG,{open:k,onOpenChange:P,children:(0,s.jsxs)(h.Cf,{children:[(0,s.jsx)(h.c7,{children:(0,s.jsx)(h.L3,{children:"Invite Member"})}),(0,s.jsx)(x.p,{placeholder:"Email address",value:q,onChange:e=>A(e.target.value)}),(0,s.jsxs)(h.Es,{children:[(0,s.jsx)(p.$,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),(0,s.jsx)(p.$,{onClick:async()=>{await j.mutateAsync({familyId:t,email:q}),A(""),P(!1)},loading:j.isPending,children:"Send Invite"})]})]})})]})}},6633:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var s=a(2725);a(1616);var r=a(7918),n=a(949);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"border-transparent bg-primary text-white",secondary:"border-transparent bg-surface-variant text-text-secondary",destructive:"border-transparent bg-error text-white",outline:"text-text border-border",income:"border-transparent bg-income/10 text-income",expense:"border-transparent bg-expense/10 text-expense"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...a}){return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...a})}},2478:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>m,Es:()=>p,L3:()=>x,c7:()=>u,lG:()=>l});var s=a(2725),r=a(1616),n=a(9793),i=a(3766),o=a(949);let l=n.bL;n.l9;let d=n.ZL;n.bm;let c=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.hJ,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));c.displayName=n.hJ.displayName;let m=r.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(d,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(n.UC,{ref:r,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-surface p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-xl",e),...a,children:[t,(0,s.jsx)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})]})]}));m.displayName=n.UC.displayName;let u=({className:e,...t})=>(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t}),p=({className:e,...t})=>(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t}),x=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.hE,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight text-text",e),...t}));x.displayName=n.hE.displayName,r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.VY,{ref:a,className:(0,o.cn)("text-sm text-text-secondary",e),...t})).displayName=n.VY.displayName},9912:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(2725),r=a(1616),n=a(949);let i=r.forwardRef(({className:e,type:t,...a},r)=>(0,s.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text placeholder:text-text-disabled focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50 transition-colors",e),ref:r,...a}));i.displayName="Input"},9493:(e,t,a)=>{"use strict";a.d(t,{c:()=>o,n:()=>l});var s=a(5607),r=a(2642),n=a(4624),i=a(5710);function o(){let e=(0,s.jE)(),t=(0,r.I)({queryKey:["families"],queryFn:async()=>await i.u.get("/families")}),a=(0,r.I)({queryKey:["family-invitations-pending"],queryFn:async()=>await i.u.get("/families/invitations/pending")}),o=(0,n.n)({mutationFn:async e=>await i.u.post("/families",{name:e}),onSuccess:()=>{e.invalidateQueries({queryKey:["families"]})}}),l=(0,n.n)({mutationFn:async({familyId:e,email:t})=>{await i.u.post(`/families/${e}/invitations`,{inviteeEmail:t})}}),d=(0,n.n)({mutationFn:async({familyId:e,userId:t})=>{await i.u.delete(`/families/${e}/members/${t}`)},onSuccess:()=>{e.invalidateQueries({queryKey:["families"]})}}),c=(0,n.n)({mutationFn:async e=>{await i.u.delete(`/families/${e}/members/me`)},onSuccess:()=>{e.invalidateQueries({queryKey:["families"]})}}),m=(0,n.n)({mutationFn:async e=>{await i.u.post(`/families/invitations/${e}/accept`,{})},onSuccess:()=>{e.invalidateQueries({queryKey:["families"]}),e.invalidateQueries({queryKey:["family-invitations-pending"]})}}),u=(0,n.n)({mutationFn:async e=>{await i.u.post(`/families/invitations/${e}/decline`,{})},onSuccess:()=>{e.invalidateQueries({queryKey:["family-invitations-pending"]})}});return{families:t.data||[],pendingInvitations:a.data||[],isLoading:t.isLoading,createFamily:o,inviteMember:l,removeMember:d,leaveFamily:c,acceptInvitation:m,declineInvitation:u}}function l(e){return(0,r.I)({queryKey:["family",e],queryFn:async()=>await i.u.get(`/families/${e}`),enabled:!!e})}},1129:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(684).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3766:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(684).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6331:(e,t,a)=>{"use strict";a.d(t,{vv:()=>i,VZ:()=>o,X5:()=>r,O5:()=>n});var s=a(2666);let r=s.Ik({email:s.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:s.Yj().min(1,"Password is required")}),n=s.Ik({firstName:s.Yj().min(1,"First name is required").min(2,"First name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"First name can only contain letters"),lastName:s.Yj().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"Last name can only contain letters"),email:s.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:s.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Must contain at least one uppercase letter").regex(/[a-z]/,"Must contain at least one lowercase letter").regex(/[0-9]/,"Must contain at least one number").regex(/[^A-Za-z0-9]/,"Must contain at least one special character"),confirmPassword:s.Yj().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords must match",path:["confirmPassword"]});function i(e){return`$${e.toFixed(2)}`}function o(e){return e%1==0?e.toString():e.toFixed(3).replace(/\.?0+$/,"")}},3363:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(2771).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/families/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/families/[id]/page.tsx","default")}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[157,279,625,642,666,734,523],()=>a(9261));module.exports=s})();