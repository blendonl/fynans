(()=>{var e={};e.id=67,e.ids=[67],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4163:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>a.a,__next_app__:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>l});var s=i(735),n=i(1232),r=i(2914),a=i.n(r),o=i(85),u={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>o[e]);i.d(t,u);let l=["",{children:["(app)",{children:["families",{children:["invitations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,8750)),"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/families/invitations/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,3069)),"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,8270,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,5335,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,4908,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,1052)),"/mnt/data/personal/mmoneymanager/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,8270,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,5335,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,4908,23)),"next/dist/client/components/unauthorized-error"]}],c=["/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/families/invitations/page.tsx"],d={require:i,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(app)/families/invitations/page",pathname:"/families/invitations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},2445:(e,t,i)=>{Promise.resolve().then(i.bind(i,8750))},237:(e,t,i)=>{Promise.resolve().then(i.bind(i,7214))},7214:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var s=i(2725),n=i(9493),r=i(7466),a=i(6476);function o(){let{pendingInvitations:e,acceptInvitation:t,declineInvitation:i}=(0,n.c)();return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-text",children:"Invitations"}),0===e.length?(0,s.jsx)(a.Zp,{className:"p-8 text-center",children:(0,s.jsx)("p",{className:"text-text-secondary",children:"No pending invitations"})}):(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsx)(a.Zp,{children:(0,s.jsxs)(a.Wu,{className:"flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-text",children:"Family invitation"}),(0,s.jsxs)("p",{className:"text-xs text-text-secondary",children:["Expires: ",new Date(e.expiresAt).toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(r.$,{size:"sm",onClick:()=>t.mutate(e.id),children:"Accept"}),(0,s.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>i.mutate(e.id),children:"Decline"})]})]})},e.id))})]})}},9493:(e,t,i)=>{"use strict";i.d(t,{c:()=>o,n:()=>u});var s=i(5607),n=i(2642),r=i(4624),a=i(5710);function o(){let e=(0,s.jE)(),t=(0,n.I)({queryKey:["families"],queryFn:async()=>await a.u.get("/families")}),i=(0,n.I)({queryKey:["family-invitations-pending"],queryFn:async()=>await a.u.get("/families/invitations/pending")}),o=(0,r.n)({mutationFn:async e=>await a.u.post("/families",{name:e}),onSuccess:()=>{e.invalidateQueries({queryKey:["families"]})}}),u=(0,r.n)({mutationFn:async({familyId:e,email:t})=>{await a.u.post(`/families/${e}/invitations`,{inviteeEmail:t})}}),l=(0,r.n)({mutationFn:async({familyId:e,userId:t})=>{await a.u.delete(`/families/${e}/members/${t}`)},onSuccess:()=>{e.invalidateQueries({queryKey:["families"]})}}),c=(0,r.n)({mutationFn:async e=>{await a.u.delete(`/families/${e}/members/me`)},onSuccess:()=>{e.invalidateQueries({queryKey:["families"]})}}),d=(0,r.n)({mutationFn:async e=>{await a.u.post(`/families/invitations/${e}/accept`,{})},onSuccess:()=>{e.invalidateQueries({queryKey:["families"]}),e.invalidateQueries({queryKey:["family-invitations-pending"]})}}),p=(0,r.n)({mutationFn:async e=>{await a.u.post(`/families/invitations/${e}/decline`,{})},onSuccess:()=>{e.invalidateQueries({queryKey:["family-invitations-pending"]})}});return{families:t.data||[],pendingInvitations:i.data||[],isLoading:t.isLoading,createFamily:o,inviteMember:u,removeMember:l,leaveFamily:c,acceptInvitation:d,declineInvitation:p}}function u(e){return(0,n.I)({queryKey:["family",e],queryFn:async()=>await a.u.get(`/families/${e}`),enabled:!!e})}},8750:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});let s=(0,i(2771).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/families/invitations/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/families/invitations/page.tsx","default")},4624:(e,t,i)=>{"use strict";i.d(t,{n:()=>c});var s=i(1616),n=i(5464),r=i(9503),a=i(3214),o=i(4734),u=class extends a.Q{#e;#t=void 0;#i;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#i,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.EN)(t.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():this.#i?.state.status==="pending"&&this.#i.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#i?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#i?.removeObserver(this),this.#i=void 0,this.#n(),this.#r()}mutate(e,t){return this.#s=t,this.#i?.removeObserver(this),this.#i=this.#e.getMutationCache().build(this.#e,this.options),this.#i.addObserver(this),this.#i.execute(e)}#n(){let e=this.#i?.state??(0,n.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){r.jG.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,i=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#s.onSuccess?.(e.data,t,i,s)}catch(e){Promise.reject(e)}try{this.#s.onSettled?.(e.data,null,t,i,s)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#s.onError?.(e.error,t,i,s)}catch(e){Promise.reject(e)}try{this.#s.onSettled?.(void 0,e.error,t,i,s)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},l=i(5607);function c(e,t){let i=(0,l.jE)(t),[n]=s.useState(()=>new u(i,e));s.useEffect(()=>{n.setOptions(e)},[n,e]);let a=s.useSyncExternalStore(s.useCallback(e=>n.subscribe(r.jG.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),c=s.useCallback((e,t)=>{n.mutate(e,t).catch(o.lQ)},[n]);if(a.error&&(0,o.GU)(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:c,mutateAsync:a.mutate}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),s=t.X(0,[157,279,625,642,523],()=>i(4163));module.exports=s})();