(()=>{var e={};e.id=537,e.ids=[537],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},8149:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(735),a=r(1232),n=r(2914),i=r.n(n),o=r(85),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["(app)",{children:["transactions",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3632)),"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/transactions/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,3069)),"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,8270,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,5335,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,4908,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1052)),"/mnt/data/personal/mmoneymanager/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,8270,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,5335,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,4908,23)),"next/dist/client/components/unauthorized-error"]}],c=["/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/transactions/[id]/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(app)/transactions/[id]/page",pathname:"/transactions/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6477:(e,t,r)=>{Promise.resolve().then(r.bind(r,3632))},6797:(e,t,r)=>{Promise.resolve().then(r.bind(r,6654))},6654:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ea});var s=r(2725),a=r(1616),n=r(207),i=r(5607),o=r(2642),l=r(4624),d=r(1129),c=r(5710),m=r(7466),x=r(87),p=r(6331),u=r(6633),f=r(6476);r(7377);var h=r(9300),y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,h.TL)(`Primitive.${t}`),n=a.forwardRef((e,a)=>{let{asChild:n,...i}=e,o=n?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(o,{...i,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),g="horizontal",v=["horizontal","vertical"],j=a.forwardRef((e,t)=>{let{decorative:r,orientation:a=g,...n}=e,i=v.includes(a)?a:g;return(0,s.jsx)(y.div,{"data-orientation":i,...r?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"},...n,ref:t})});j.displayName="Separator";var b=r(949);let N=a.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...a},n)=>(0,s.jsx)(j,{ref:n,decorative:r,orientation:t,className:(0,b.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...a}));N.displayName=j.displayName;var w=r(6235),A=r(613),P=r(9793),R=r(3095),D=Symbol("radix.slottable"),$="AlertDialog",[q,k]=(0,w.A)($,[P.Hs]),I=(0,P.Hs)(),_=e=>{let{__scopeAlertDialog:t,...r}=e,a=I(t);return(0,s.jsx)(P.bL,{...a,...r,modal:!0})};_.displayName=$;var z=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=I(r);return(0,s.jsx)(P.l9,{...n,...a,ref:t})});z.displayName="AlertDialogTrigger";var C=e=>{let{__scopeAlertDialog:t,...r}=e,a=I(t);return(0,s.jsx)(P.ZL,{...a,...r})};C.displayName="AlertDialogPortal";var E=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=I(r);return(0,s.jsx)(P.hJ,{...n,...a,ref:t})});E.displayName="AlertDialogOverlay";var S="AlertDialogContent",[F,Z]=q(S),L=function(e){let t=({children:e})=>(0,s.jsx)(s.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=D,t}("AlertDialogContent"),Y=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:n,...i}=e,o=I(r),l=a.useRef(null),d=(0,A.s)(t,l),c=a.useRef(null);return(0,s.jsx)(P.G$,{contentName:S,titleName:M,docsSlug:"alert-dialog",children:(0,s.jsx)(F,{scope:r,cancelRef:c,children:(0,s.jsxs)(P.UC,{role:"alertdialog",...o,...i,ref:d,onOpenAutoFocus:(0,R.mK)(i.onOpenAutoFocus,e=>{e.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,s.jsx)(L,{children:n}),(0,s.jsx)(V,{contentRef:l})]})})})});Y.displayName=S;var M="AlertDialogTitle",O=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=I(r);return(0,s.jsx)(P.hE,{...n,...a,ref:t})});O.displayName=M;var T="AlertDialogDescription",B=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=I(r);return(0,s.jsx)(P.VY,{...n,...a,ref:t})});B.displayName=T;var G=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=I(r);return(0,s.jsx)(P.bm,{...n,...a,ref:t})});G.displayName="AlertDialogAction";var K="AlertDialogCancel",H=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,{cancelRef:n}=Z(K,r),i=I(r),o=(0,A.s)(t,n);return(0,s.jsx)(P.bm,{...i,...a,ref:o})});H.displayName=K;var V=({contentRef:e})=>{let t=`\`${S}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${S}\` by passing a \`${T}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${S}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};let W=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(E,{className:(0,b.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out",e),...t,ref:r}));W.displayName=E.displayName;let Q=a.forwardRef(({className:e,...t},r)=>(0,s.jsxs)(C,{children:[(0,s.jsx)(W,{}),(0,s.jsx)(Y,{ref:r,className:(0,b.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-surface p-6 shadow-lg duration-200 rounded-xl",e),...t})]}));Q.displayName=Y.displayName;let U=({className:e,...t})=>(0,s.jsx)("div",{className:(0,b.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t}),X=({className:e,...t})=>(0,s.jsx)("div",{className:(0,b.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t}),J=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(O,{ref:r,className:(0,b.cn)("text-lg font-semibold text-text",e),...t}));J.displayName=O.displayName;let ee=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(B,{ref:r,className:(0,b.cn)("text-sm text-text-secondary",e),...t}));ee.displayName=B.displayName;let et=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(G,{ref:r,className:(0,b.cn)((0,m.r)(),e),...t}));et.displayName=G.displayName;let er=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(H,{ref:r,className:(0,b.cn)((0,m.r)({variant:"outline"}),e),...t}));function es({transaction:e,onDelete:t,isDeleting:r}){let a=e.transaction.createdAt?new Date(e.transaction.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(f.Zp,{children:[(0,s.jsxs)(f.aR,{className:"text-center pb-2",children:[(0,s.jsx)(u.E,{variant:"expense"===e.type?"expense":"income",className:"mx-auto mb-2",children:"expense"===e.type?"Expense":"Income"}),(0,s.jsxs)("p",{className:`text-4xl font-bold ${"expense"===e.type?"text-expense":"text-income"}`,children:["expense"===e.type?"âˆ’":"+",(0,p.vv)(e.transaction.value)]}),(0,s.jsx)("p",{className:"text-sm text-text-secondary mt-2",children:a})]}),(0,s.jsxs)(f.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Category"}),(0,s.jsx)("p",{className:"text-sm font-medium text-text",children:e.category.name})]}),e.store&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Store"}),(0,s.jsx)("p",{className:"text-sm font-medium text-text",children:e.store.name}),e.store.location&&(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:e.store.location})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Scope"}),(0,s.jsx)("p",{className:"text-sm font-medium text-text",children:e.scope})]}),e.transaction.user&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"By"}),(0,s.jsxs)("p",{className:"text-sm font-medium text-text",children:[e.transaction.user.firstName," ",e.transaction.user.lastName]})]})]}),e.transaction.description&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-text-secondary",children:"Description"}),(0,s.jsx)("p",{className:"text-sm text-text",children:e.transaction.description})]})]})]})]}),e.items&&e.items.length>0&&(0,s.jsxs)(f.Zp,{children:[(0,s.jsx)(f.aR,{children:(0,s.jsxs)(f.ZB,{children:["Items (",e.items.length,")"]})}),(0,s.jsx)(f.Wu,{children:(0,s.jsx)("div",{className:"space-y-3",children:e.items.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-0",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-text",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-text-secondary",children:["Qty: ",e.quantity,e.discount?` \xb7 Discount: ${(0,p.vv)(e.discount)}`:""]})]}),(0,s.jsx)("p",{className:"text-sm font-medium text-text",children:(0,p.vv)(e.price*e.quantity)})]},t))})})]}),e.receiptImages&&e.receiptImages.length>0&&(0,s.jsxs)(f.Zp,{children:[(0,s.jsx)(f.aR,{children:(0,s.jsx)(f.ZB,{children:"Receipts"})}),(0,s.jsx)(f.Wu,{children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:e.receiptImages.map((e,t)=>(0,s.jsx)("img",{src:e,alt:`Receipt ${t+1}`,className:"rounded-lg border border-border object-cover w-full"},t))})})]}),(0,s.jsxs)(_,{children:[(0,s.jsx)(z,{asChild:!0,children:(0,s.jsxs)(m.$,{variant:"destructive",className:"w-full",children:[(0,s.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Delete Transaction"]})}),(0,s.jsxs)(Q,{children:[(0,s.jsxs)(U,{children:[(0,s.jsx)(J,{children:"Delete transaction?"}),(0,s.jsx)(ee,{children:"This action cannot be undone. This will permanently delete this transaction."})]}),(0,s.jsxs)(X,{children:[(0,s.jsx)(er,{children:"Cancel"}),(0,s.jsx)(et,{onClick:t,disabled:r,children:r?"Deleting...":"Delete"})]})]})]})]})}function ea({params:e}){let{id:t}=(0,a.use)(e),r=(0,n.useRouter)(),x=(0,n.useSearchParams)(),p=(0,i.jE)(),u=x.get("type")||"expense",f="income"===u?"/incomes":"/expenses",{data:h,isLoading:y}=(0,o.I)({queryKey:["transaction",t,u],queryFn:async()=>{let e=await c.u.get(`${f}/${t}`),r=e.transaction;return{id:e.id,type:u,category:e.category,store:e.store,scope:r?.scope||"PERSONAL",familyId:r?.familyId,transaction:{id:r?.id||"",value:r?.value||0,createdAt:r?.createdAt,description:r?.description,user:r?.user},items:e.items,receiptImages:e.receiptImages||[]}}}),g=(0,l.n)({mutationFn:async()=>{await c.u.delete(`${f}/${t}`)},onSuccess:()=>{p.invalidateQueries({queryKey:["transactions"]}),r.push("/transactions")}});return y?(0,s.jsx)("div",{className:"max-w-2xl mx-auto space-y-4",children:(0,s.jsx)("div",{className:"h-48 rounded-xl bg-surface-variant animate-pulse"})}):h?(0,s.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,s.jsxs)(m.$,{variant:"ghost",onClick:()=>r.back(),children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,s.jsx)(es,{transaction:h,onDelete:()=>g.mutate(),isDeleting:g.isPending})]}):(0,s.jsx)("div",{className:"max-w-2xl mx-auto text-center py-12",children:(0,s.jsx)("p",{className:"text-text-secondary",children:"Transaction not found"})})}er.displayName=H.displayName},6633:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var s=r(2725);r(1616);var a=r(7918),n=r(949);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"border-transparent bg-primary text-white",secondary:"border-transparent bg-surface-variant text-text-secondary",destructive:"border-transparent bg-error text-white",outline:"text-text border-border",income:"border-transparent bg-income/10 text-income",expense:"border-transparent bg-expense/10 text-expense"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...r})}},1129:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(684).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6331:(e,t,r)=>{"use strict";r.d(t,{vv:()=>i,VZ:()=>o,X5:()=>a,O5:()=>n});var s=r(2666);let a=s.Ik({email:s.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:s.Yj().min(1,"Password is required")}),n=s.Ik({firstName:s.Yj().min(1,"First name is required").min(2,"First name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"First name can only contain letters"),lastName:s.Yj().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").regex(/^[a-zA-Z\s]+$/,"Last name can only contain letters"),email:s.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:s.Yj().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Must contain at least one uppercase letter").regex(/[a-z]/,"Must contain at least one lowercase letter").regex(/[0-9]/,"Must contain at least one number").regex(/[^A-Za-z0-9]/,"Must contain at least one special character"),confirmPassword:s.Yj().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords must match",path:["confirmPassword"]});function i(e){return`$${e.toFixed(2)}`}function o(e){return e%1==0?e.toString():e.toFixed(3).replace(/\.?0+$/,"")}},3632:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(2771).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/transactions/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/data/personal/mmoneymanager/apps/web/src/app/(app)/transactions/[id]/page.tsx","default")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[157,279,625,642,666,734,523],()=>r(8149));module.exports=s})();