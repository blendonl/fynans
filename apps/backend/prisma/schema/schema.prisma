generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id String @id @default(uuid())

  email     String  @unique
  name      String  @default("")
  firstName String  @default("") @map("first_name")
  lastName  String  @default("") @map("last_name")
  image     String?
  balance   Decimal @default(0)

  emailVerified Boolean @default(false) @map("email_verified")

  transactions Transaction[]
  accounts     Account[]
  sessions     Session[]

  // Family relationships
  familyMemberships   FamilyMember[]
  sentInvitations     FamilyInvitation[] @relation("sent_invitations")
  receivedInvitations FamilyInvitation[] @relation("received_invitations")

  // Notification relationships
  notifications          Notification[]
  notificationPreference NotificationPreference?
  deviceTokens           DeviceToken[]
  webPushSubscriptions   WebPushSubscription[]

  // User-scoped entity relationships
  userExpenseCategories UserExpenseCategory[]
  userIncomeCategories  UserIncomeCategory[]
  userStores            UserStore[]
  userItems             UserItem[]
  userStoreItems        UserStoreItem[]
  userItemCategories    UserItemCategory[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("users")
}
